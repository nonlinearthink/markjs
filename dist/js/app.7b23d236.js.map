{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/demo4.jpg","webpack:///./src/assets/demo2.jpg","webpack:///../markjs/src/assets/pen.png","webpack:///./src/components/Demo6.vue?57ea","webpack:///./src/components/Demo2.vue?37b9","webpack:///./src/App.vue","webpack:///./src/components/Demo1.vue","webpack:///../markjs/src/observer.js","webpack:///../markjs/src/utils.js","webpack:///../markjs/src/markItem.js","webpack:///../markjs/src/plugins/edit.js","webpack:///../markjs/index.js","webpack:///../markjs/src/plugins/scale.js","webpack:///./src/components/Demo1.vue?fd6d","webpack:///./src/components/Demo2.vue","webpack:///./src/components/Demo2.vue?2bec","webpack:///./src/components/Demo3.vue","webpack:///../markjs/src/plugins/img.js","webpack:///./src/components/Demo3.vue?cd33","webpack:///./src/components/Demo4.vue","webpack:///../markjs/src/plugins/shape.js","webpack:///./src/components/Demo4.vue?9cea","webpack:///./src/components/Demo5.vue","webpack:///../markjs/src/plugins/mouse.js","webpack:///./src/components/Demo5.vue?68a2","webpack:///./src/components/Demo6.vue","webpack:///./src/components/Demo6.vue?7495","webpack:///./src/components/Demo3-2.vue","webpack:///./src/components/Demo3-2.vue?c79b","webpack:///./src/components/Demo3-3.vue","webpack:///./src/components/Demo3-3.vue?2908","webpack:///./src/components/Demo3-4.vue","webpack:///./src/components/Demo3-4.vue?06c9","webpack:///./src/App.vue?eabf","webpack:///./src/main.js","webpack:///./src/assets/demo6.png","webpack:///./src/components/Demo3-2.vue?a40a","webpack:///./src/components/Demo5.vue?a26c","webpack:///./src/assets/demo.png","webpack:///./src/components/Demo4.vue?aeb1","webpack:///./src/components/Demo1.vue?dc26","webpack:///./src/components/Demo3.vue?9d3b","webpack:///./src/App.vue?5996","webpack:///./src/assets/demo3.jpg","webpack:///./src/components/Demo3-3.vue?611e","webpack:///./src/assets/demo5.png","webpack:///./src/components/Demo3-4.vue?d1b7"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","id","href","ref","type","create0","disabled","editing0","curEditMarkItem0","create01","exit0","isCreateMarking0","getMarkData0","icon","deleteItem1","deleteAll0","Observer","this","observerListeners","observerToken","topic","subList","arg","context","fn","arguments","undefined","token","k","checkLineSegmentCross","a","b","cross","ab","x","y","ac","ad","abac","abad","dc","da","db","dcda","dcdb","getLinePointDistance","x1","y1","x2","y2","Math","abs","A","C","B","sqrt","getAngle","atan2","PI","getLinePointYByX","min","getY","getLineAllPoint","arr","dy","dx","getTwoPointDistance","pow","getNearestPointFromLine","Infinity","minPoint","forEach","item","loadImage","src","Promise","resolve","reject","img","Image","onload","onerror","e","defaultStrokeStyle","lineWidth","strokeColor","lineJoin","frontLineWidth","frontStrokeColor","frontLineJoin","defaultFillColor","defaultPointStyle","fillColor","defaultOpt","showPoint","pointType","pointWidth","lineType","MarkItem","ctx","opt","updateOpt","updatePointFn","updatePoint","pointArr","isClosePath","isEditing","isDragging","dragPointIndex","dragCachePointArr","hoverActive","areaToPointPos","strokeStyle","pointStyle","area","enableAddPoint","insertFictitiousPoints","removeFictitiousPoints","filter","fictitious","getTruePointArr","index","renderArea","customRenderLine","renderLines","renderPoints","save","fillStyle","beginPath","_pointArr","concat","moveTo","lineTo","closePath","fill","restore","onlyPath","stroke","callback","drawPoint","points","len","newArr","reverse","customRenderPoint","rect","arc","isPointInPath","pointIndex","JSON","parse","stringify","count","getTruePointIndex","args","ox","oy","map","checkCrossPrevCheck","lineSegments","createLineSegments","checkCrossWithLineSegments","close","utils","minLine","minNum","max","readonly","single","noCrossing","dbClickRemovePoint","adsorbent","adsorbentNum","adsorbentLine","dbClickActive","singleClickComplete","EditPlugin","instance","_resolve","promise","cursorTips","HOVER","markItemList","curEditingMarkItem","dragStartPos","dragStartPosCache","isReadonly","isCreateMarking","createMarkItemOpt","cachePointArr","mId","adsorbentedPos","adsorbentedWholePos","adsorbentedWholePosCacheMousePos","lastIsDragging","adsorbentMark","createNewMarkItem","mousedownPos","mouseupPos","reShow","_markItem","point","canvasEleRectInfo","width","height","render","getState","plusOpt","clearCanvas","disableAllItemsEdit","disable","disableAllItemsHoverActive","disableHoverActive","checkInPathItem","checkInPath","checkInPoints","checkInPathAllItems","items","getMarkData","getIsCreateIngMarkItem","enableEdit","reset","setMarkEditItem","disableEdit","setIsCreateMarking","state","emit","createMarkItem","_opt","exitCreate","findIndex","deleteMarkItem","deleteItem","deleteAllMarkItem","checkAdsorbent","_x","_y","_adsorbentedPos","nearestLine","getPintNearestLine","pointA","pointB","minx","maxx","nearestPoint","checkAdsorbentWhole","minPoint2","pointItem","markItem","markItemPointItem","on","mobile","toCanvasPos","inPathItem","checkNextLineSegmentCross","pushPoint","enable","includes","canActive","isSame","inPointIndex","getPointLength","removePoint","checkEndLineSegmentCross","clientX","clientY","isInPath","enableDrag","mobileEvent","stopPropagation","preventDefault","dragPoint","dragAll","apos","areaToPoint","enableHoverActive","disableDrag","_disableAllItemsEdit","_setMarkEditItem","_createNewMarkItem","_setIsCreateMarking","_render","_disableAllItemsHoverActive","_checkInPathItem","_checkInPathAllItems","_getIsCreateIngMarkItem","dbClickTime","Markjs","el","Error","originEl","document","querySelector","crateContainer","elRectInfo","canvasEle","clickTimer","observer","lastClickTime","bindEventCallback","init","usePlugins","newOpt","merge","pluginList","loopUse","cur","then","event","publish","subscribe","unsubscribe","newEl","createElement","className","style","cssText","overflow","appendChild","getContext","bindEvent","unbindEvent","removeChild","clearAll","getBoundingClientRect","onclick","onmousedown","onmousemove","onmouseup","onmouseenter","onmouseleave","onWindowClick","isMobile","addEventListener","removeEventListener","clearTimeout","setTimeout","Date","now","touches","clearRect","cx","cy","left","top","plugin","used","use","editPlugin","scale","draging","origX","origY","startX","startY","dragX","dragY","transition","scaleStep","maxScale","originToCanvasPos","res","deltaY","zoomOut","zoomIn","touchDistance","p1","p2","distance","setTransition","setTransform","transform","mark0","mounted","$refs","markBox0","showPen","$message","warning","methods","console","log","deleteItem0","__exports__","create1","editing1","curEditMarkItem1","exit1","isCreateMarking1","getMarkData1","deleteAll1","mark1","markBox1","create2","editing2","curEditMarkItem2","exit2","isCreateMarking2","getMarkData2","deleteItem2","deleteAll2","elBg","bg","ImgPlugin","imgCanvasEle","image","imgActWidth","imgActHeight","actEditWidth","actEditHeight","ratio","isRefreshImage","catch","refreshImage","setSize","setElStyle","setCanvasStyle","zIndex","drawImg","imgActRatio","elRatio","elPosition","getComputedStyle","position","background","canvas","keys","drawImage","mark2","markBox2","createShape3","editing3","curEditMarkItem3","exit3","isCreateMarking3","getMarkData3","deleteItem3","deleteAll3","shape","square","_width","hw","hh","update","fixIndex","fixPoint","newX","newY","even","rectangle","xChangePoint","yChangePoint","ShapePlugin","addUpdate","createShapeMarkItem","_shape","mark3","markBox3","curEditMarkItem","create4","editing4","curEditMarkItem4","exit4","isCreateMarking4","getMarkData4","deleteItem4","deleteAll4","penImg","require","START","EDITING","EDITING_POINT","mousePlugin","cursorTipEle","tips","isHoverInItem","createEle","body","showEle","display","hideEle","cursor","hidePen","setElePos","setEleText","text","innerHTML","hideAll","curItem","allInItems","mark4","markBox4","edit5","editing5","create5","curEditMarkItem5","createShape5","exit5","isCreateMarking5","getMarkData5","deleteItem5","deleteAll5","mark5","markBox5","succ","mark","refresh","imgList","floor","random","markBox33","markBox34","components","Demo1","Demo2","Demo3","Demo4","Demo5","Demo6","Demo32","Demo33","Demo34","app","createApp","App","ElementPlus","mount"],"mappings":"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","file":"js/app.7b23d236.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/demo4.658f86ab.jpg\";","module.exports = __webpack_public_path__ + \"img/demo2.d185c21c.jpg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACB0lEQVR42q2USy8DURiGD0NdirZmOtOq0kH1kt4T90uj2AmxwMJ1JzaiupFYSdj4CX6Cn9AfYGXLSlhghY0ICwve03wjY9R0JJo8mbZz5jlz3vOdj0Wj0e1IJLITDod3cc3zqyzLScaYB0jAAeygDtQAAVQRPz+ZTObDSDKZvBJFsQ+3/UABraCJpLWm0nJCkl67XK5RDFGBF4igGdSbSn8TkvTG6XRmMawbtFMELQZp9TepmVAnncDQoCVpKpV6sCJ1OBw5kvpNpW63exEPPP1B2ltByvqxo+v/KGUpMIacNhKJxG0lKSK6VxRlzkTKovwtwYTdbl+B9M7Cmz6StAf4SKqVVKkk4mAITEG6akXKNxPSWZ1UK/7Sjx5a+jCYhnTtD9IZPNMF2kjK3JRFCKTBiFVpOp1+V1W1gPzH6UTx818KlEs7KGi99Nflc1kgEDjw+Xxb+P6CpnJEDtZAUhl0Gt500mazLcVisUvDUt8gOvR4PAXIXrX/g8HgJqOtbqQ2pdAsIV2mOUEQ5iG90GTIbR/s6WWceDxeZFTdeqmsW34CDIAspHOQnnNRORkH/fSY0aHmUptB6qfdjwHeG3kry3m93nw5GSYr0tivnqZJtUwlKqkuKn6e66AkScu8sPUydP1Tut+rdTFNKhikIjXXAOXKD0AGDWUBeZ0hz2cs84Ty5pOqn0HMGhL4OcejAAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo6.vue?vue&type=style&index=0&id=ce92a108&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo2.vue?vue&type=style&index=0&id=309cb156&lang=less&scoped=true\"","<template>\r\n  <div>\r\n    <!-- pc端 -->\r\n    <Demo1></Demo1>\r\n    <Demo2></Demo2>\r\n    <Demo4></Demo4>\r\n    <Demo3></Demo3>\r\n    <Demo32></Demo32>\r\n    <Demo5></Demo5>\r\n    <Demo6></Demo6>\r\n    <!-- 手机端 -->\r\n    <!-- <Demo33></Demo33> -->\r\n    <!-- <Demo34></Demo34> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Demo1 from \"./components/Demo1\";\r\nimport Demo2 from \"./components/Demo2\";\r\nimport Demo3 from \"./components/Demo3\";\r\nimport Demo4 from \"./components/Demo4\";\r\nimport Demo5 from \"./components/Demo5\";\r\nimport Demo6 from \"./components/Demo6\";\r\nimport Demo32 from './components/Demo3-2';\r\nimport Demo33 from './components/Demo3-3';\r\nimport Demo34 from './components/Demo3-4';\r\n\r\nexport default {\r\n  name: \"App\",\r\n  components: {\r\n    Demo1,\r\n    Demo2,\r\n    Demo3,\r\n    Demo4,\r\n    Demo5,\r\n    Demo6,\r\n    Demo32,\r\n    Demo33,\r\n    Demo34\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  width: 800px;\r\n  margin: 0 auto;\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo1\" id=\"demo1\">\r\n      <a href=\"#demo1\">推荐用法</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox0\"></div>\r\n    <div class=\"btnGroup\">\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"create0\"\r\n        :disabled=\"!editing0 || !!curEditMarkItem0\"\r\n        >新增空标注</el-button\r\n      >\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"create01\"\r\n        :disabled=\"!editing0 || !!curEditMarkItem0\"\r\n        >新增非空标注</el-button\r\n      >\r\n      <el-button type=\"primary\" @click=\"exit0\" :disabled=\"!isCreateMarking0\"\r\n        >退出新增</el-button\r\n      >\r\n      <el-button type=\"primary\" @click=\"getMarkData0\"\r\n        >获取标注（控制台查看）</el-button\r\n      >\r\n      <el-button\r\n        type=\"primary\"\r\n        icon=\"el-icon-delete\"\r\n        @click=\"deleteItem1\"\r\n        :disabled=\"!curEditMarkItem0\"\r\n      ></el-button>\r\n      <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll0\"\r\n        >删除全部</el-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport scalePlugin from '@wanglin1994/markjs/src/plugins/scale';\r\nMarkjs.use(scalePlugin);\r\n\r\nlet mark0 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 推荐用法\r\n      editing0: true,\r\n      curEditMarkItem0: null,\r\n      isCreateMarking0: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 推荐用法\r\n      mark0 = new Markjs({\r\n        el: this.$refs.markBox0,\r\n        hoverActive: false,\r\n        dbClickActive: true,\r\n        noCrossing: true,\r\n        enableAddPoint: true,\r\n        area: true,\r\n        showPen: false,\r\n        singleClickComplete: false,\r\n        pointType: \"circle\",\r\n        pointWidth: 2,\r\n        pointStyle: {\r\n          lineWidth: 2,\r\n          strokeColor: \"#0088FF\",\r\n          fillColor: \"#fff\",\r\n        },\r\n        lineType: \"borderLine\",\r\n        strokeStyle: {\r\n          lineWidth: 5,\r\n          strokeColor: \"rgba(255, 255, 255, 0.7)\",\r\n          frontLineWidth: 3,\r\n          frontStrokeColor: \"#2196F3\",\r\n        },\r\n        fillColor: \"rgba(0,136,255,0.30)\",\r\n        dbClickRemovePoint: true,\r\n      });\r\n      mark0.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem0 = item;\r\n      });\r\n      mark0.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking0 = state;\r\n      });\r\n      mark0.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n      mark0.on(\"LINE-CROSS\", (item) => {\r\n        this.$message.warning(\"线段不允许交叉\");\r\n      });\r\n      mark0.on(\"NOT-ENOUGH-POINTS-REMOVE\", (item) => {\r\n        this.$message.warning(\"至少需要三个端点\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    // 推荐用法\r\n    // 基础用法\r\n    getMarkData0() {\r\n      console.log(mark0.getMarkData(), JSON.stringify(mark0.getMarkData()));\r\n    },\r\n    deleteItem0() {\r\n      mark0.deleteMarkItem(this.curEditMarkItem0);\r\n    },\r\n    deleteAll0() {\r\n      mark0.deleteAllMarkItem();\r\n    },\r\n    create0() {\r\n      mark0.createMarkItem();\r\n    },\r\n    create01() {\r\n      mark0.createMarkItem({\r\n        pointArr: [{\"x\":0.236875,\"y\":0.57890625},{\"x\":0.300625,\"y\":0.44265625},{\"x\":0.364375,\"y\":0.30640625},{\"x\":0.4625,\"y\":0.28640625},{\"x\":0.560625,\"y\":0.26640625},{\"x\":0.633125,\"y\":0.38390625},{\"x\":0.705625,\"y\":0.50140625},{\"x\":0.650625,\"y\":0.65515625},{\"x\":0.595625,\"y\":0.80890625},{\"x\":0.489375,\"y\":0.78515625},{\"x\":0.383125,\"y\":0.76140625},{\"x\":0.31,\"y\":0.67015625}]\r\n      });\r\n    },\r\n    exit0() {\r\n      mark0.exitCreate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","export default class Observer {\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:06:15\r\n     * @Desc: 构造函数\r\n     */\r\n    constructor () {\r\n        // 订阅的集合\r\n        this.observerListeners = {};\r\n        // 用于删除订阅\r\n        this.observerToken = 0;\r\n    }\r\n\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:06:53\r\n     * @Desc: 发布话题\r\n     */\r\n    publish (topic, ...arg) {\r\n        if (!topic || !this.observerListeners[topic]) {\r\n            return false;\r\n        }\r\n        let subList = this.observerListeners[topic];\r\n        for (let i = 0; i < subList.length; i++) {\r\n            if (subList[i].context) {\r\n                subList[i].fn.apply(subList[i].context, arg);\r\n            } else {\r\n                subList[i].fn.apply(subList[i].fn, arg);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:07:19\r\n     * @Desc:  订阅某个话题\r\n     */\r\n    subscribe (topic, fn) {\r\n        let context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\r\n\r\n        if (!this.observerListeners[topic]) {\r\n            this.observerListeners[topic] = [];\r\n        }\r\n        this.observerToken++;\r\n        this.observerListeners[topic].push({\r\n            fn: fn,\r\n            context: context,\r\n            token: this.observerToken\r\n        });\r\n        return this.observerToken;\r\n    }\r\n\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:07:46\r\n     * @Desc:  解除订阅\r\n     */\r\n    unsubscribe (token) {\r\n        if (!token) {\r\n            return false;\r\n        }\r\n        for (let k in this.observerListeners) {\r\n            if (this.observerListeners.hasOwnProperty(k)) {\r\n                for (let j = 0; j < this.observerListeners[k].length; j++) {\r\n                    if (this.observerListeners[k][j].token === token) {\r\n                        this.observerListeners[k].splice(j, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:08:16\r\n     * @Desc: 删掉某一类话题及其订阅\r\n     */\r\n    clearTopic (topic) {\r\n        if (!topic) {\r\n            return false;\r\n        }\r\n        for (let k in this.observerListeners) {\r\n            if (this.observerListeners.hasOwnProperty(k)) {\r\n                if (k === topic) {\r\n                    delete this.observerListeners[k];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * javascript comment\r\n     * @Author: 王林25\r\n     * @Date: 2020-07-31 16:08:35\r\n     * @Desc: 删除所有话题及订阅\r\n     */\r\n    clearAll () {\r\n        this.observerListeners = {};\r\n        this.observerToken = 0;\r\n    }\r\n}\r\n","/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-21 20:27:55 \r\n * @Desc: 判断两条线段是否交叉 \r\n */\r\nfunction checkLineSegmentCross(a, b, c, d) {\r\n  let cross = false\r\n  // 向量\r\n  let ab = [b.x - a.x, b.y - a.y]\r\n  let ac = [c.x - a.x, c.y - a.y]\r\n  let ad = [d.x - a.x, d.y - a.y]\r\n  // 向量叉乘，判断点c,d分别在线段ab两侧，条件1\r\n  let abac = ab[0] * ac[1] - ab[1] * ac[0]\r\n  let abad = ab[0] * ad[1] - ab[1] * ad[0]\r\n\r\n  // 向量\r\n  let dc = [c.x - d.x, c.y - d.y]\r\n  let da = [a.x - d.x, a.y - d.y]\r\n  let db = [b.x - d.x, b.y - d.y]\r\n  // 向量叉乘，判断点a,b分别在线段dc两侧，条件2\r\n  let dcda = dc[0] * da[1] - dc[1] * da[0]\r\n  let dcdb = dc[0] * db[1] - dc[1] * db[0]\r\n\r\n  // 同时满足条件1，条件2则线段交叉\r\n  if (abac * abad < 0 && dcda * dcdb < 0) {\r\n    cross = true\r\n  }\r\n  return cross\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 10:27:00 \r\n * @Desc: 求点到直线的距离 \r\n */\r\nfunction getLinePointDistance(x1, y1, x2, y2, x, y) {\r\n  // 直线垂直于x轴\r\n  if (x1 === x2) {\r\n    return Math.abs(x - x1)\r\n  } else {\r\n    let B = 1\r\n    let A, C\r\n    A = (y1 - y2) / (x2 - x1)\r\n    C = 0 - B * y1 - A * x1\r\n    return Math.abs((A * x + B * y + C) / Math.sqrt(A * A + B * B))\r\n  }\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 17:28:15 \r\n * @Desc:  计算两点间连线的倾斜角\r\n */\r\nfunction getAngle(x1, y1, x2, y2) {\r\n  let a = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI\r\n  return a > 0 ? a - 360 : a\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 14:25:25 \r\n * @Desc: 根据某条直线上的点x坐标获取y坐标 \r\n */\r\nfunction getLinePointYByX(x1, y1, x2, y2, x) {\r\n  // 直线垂直于x轴\r\n  if (x1 === x2) {\r\n    return Math.min(y1, y2)\r\n  } else {\r\n    let B = 1\r\n    let A, C\r\n    A = (y1 - y2) / (x2 - x1)\r\n    C = 0 - B * y1 - A * x1\r\n\r\n    const getY = (x) => {\r\n      return (0 - C - A * x) / B\r\n    }\r\n\r\n    return getY(x)\r\n  }\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 14:11:43 \r\n * @Desc: 获取某条直线上的所有点 \r\n */\r\nfunction getLineAllPoint(x1, y1, x2, y2) {\r\n  let arr = []\r\n  // 直线垂直于x轴\r\n  if (x1 === x2) {\r\n    let dy = Math.abs(y2 - y1)\r\n    let min = Math.min(y1, y2)\r\n    for (let i = 0; i <= dy; i++) {\r\n      arr.push([x1, min + i])\r\n    }\r\n  } else {\r\n    let B = 1\r\n    let A, C\r\n    A = (y1 - y2) / (x2 - x1)\r\n    C = 0 - B * y1 - A * x1\r\n\r\n    const getY = (x) => {\r\n      return (0 - C - A * x) / B\r\n    }\r\n\r\n    let dx = Math.abs(x2 - x1)\r\n    let min = Math.min(x1, x2)\r\n    for (let i = 0; i <= dx; i++) {\r\n      arr.push([min + i, getY(min + i)])\r\n    }\r\n  }\r\n  return arr\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 09:53:54 \r\n * @Desc: 两点距离公式 \r\n */\r\nfunction getTwoPointDistance(x1, y1, x2, y2) {\r\n  return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2))\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2021-01-22 17:25:43 \r\n * @Desc: 获取一条线段上距离某个点最近的点 \r\n */\r\nfunction getNearestPointFromLine(x1, y1, x2, y2, x, y) {\r\n  let arr = getLineAllPoint(x1, y1, x2, y2)\r\n  let min = Infinity\r\n  let minPoint = null\r\n  arr.forEach((item) => {\r\n    let d = getTwoPointDistance(item[0], item[1], x, y)\r\n    if (d < min) {\r\n      min = d\r\n      minPoint = item\r\n    }\r\n  })\r\n  return minPoint\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-22 10:34:19 \r\n * @Desc: 加载图片 \r\n */\r\nfunction loadImage(src) {\r\n  return new Promise((resolve, reject) => {\r\n    let img = new Image()\r\n    img.onload = () => {\r\n      resolve(img)\r\n    }\r\n    img.onerror = e => {\r\n      reject(e)\r\n    }\r\n    img.src = src\r\n  })\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-15 13:42:44 \r\n * @Desc: 工具方法 \r\n */\r\nexport default {\r\n  checkLineSegmentCross,\r\n  loadImage,\r\n  getTwoPointDistance,\r\n  getLinePointYByX,\r\n  getLineAllPoint,\r\n  getLinePointDistance,\r\n  getAngle,\r\n  getNearestPointFromLine\r\n}","import utils from './utils'\r\n\r\n/*\r\n// 配置\r\n{\r\n    data: null,// 附加数据，可以添加你需要的任何数据\r\n    lineType: 'line',线段类型，line（普通线段）、borderLine（带边框的线段）、custom（自定义绘图方法）\r\n    customRenderLine(this){},// 自定义绘制线段的方法\r\n    strokeStyle: {// 标注轮廓样式\r\n        lineWidth: 3,\r\n        strokeColor: 'rgba(0, 136, 255, 1)',\r\n        lineJoin: 'round',\r\n        // 如果lineType为borderLine，需要配置一下三个属性\r\n        frontLineWidth: 3,\r\n        frontStrokeColor: 'rgba(0, 136, 255, 1)',\r\n        frontLineJoin: 'round'\r\n    },\r\n    fillColor: 'rgba(0, 136, 255, 0.5)',// 标注区域填充颜色\r\n    pointStyle: {// 端点的样式\r\n        lineWidth: 3,\r\n        strokeColor: 'rgba(0, 136, 255, 1)',\r\n        fillColor: 'rgba(0, 136, 255, 0.5)'\r\n    },\r\n    pointArr: [// 回显的标注区域数据\r\n        {\r\n            data: null,//附加数据\r\n            pointArr: [{// 点位数据\r\n                {\"x\":0,\"y\":0}\r\n            }],\r\n            strokeStyle: {},\r\n            fillColor: '',\r\n            pointStyle:{}\r\n        }\r\n    ]\r\n}\r\n\r\n\r\n*/\r\n\r\n// 默认的线条样式\r\nconst defaultStrokeStyle = {\r\n    lineWidth: 3,\r\n    strokeColor: 'rgba(0, 136, 255, 1)',\r\n    lineJoin: 'round',\r\n    frontLineWidth: 3,\r\n    frontStrokeColor: 'rgba(0, 136, 255, 1)',\r\n    frontLineJoin: 'round'\r\n}\r\n// 默认填充样式\r\nconst defaultFillColor = 'rgba(0, 136, 255, 0.5)'\r\n// 默认的端点样式\r\nconst defaultPointStyle = {\r\n    lineWidth: 3,\r\n    strokeColor: 'rgba(0, 136, 255, 1)',\r\n    fillColor: 'rgba(0, 136, 255, 0.5)'\r\n}\r\n// 默认配置\r\nconst defaultOpt = {\r\n    showPoint: true,\r\n    pointType: 'square',\r\n    pointWidth: 3,\r\n    lineType: 'line'\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-09-27 15:12:17 \r\n * @Desc: 单个标注对象 \r\n */\r\nexport default class MarkItem {\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:12:11 \r\n     * @Desc: 构造函数 \r\n     */\r\n    constructor(ctx = null, opt = {}) {\r\n        // canvas上下文\r\n        this.ctx = ctx\r\n        this.updateOpt(opt)\r\n        // 自定义更新端点位置的方法\r\n        this.updatePointFn = opt.updatePoint\r\n        // 点位数组{x,y}\r\n        this.pointArr = opt.pointArr || []\r\n        // 路径是否已经闭合了\r\n        this.isClosePath = false\r\n        // 是否是编辑状态\r\n        this.isEditing = false\r\n        // 是否是拖动状态\r\n        this.isDragging = false\r\n        // 拖动的端点索引，没有则代表拖拽整体\r\n        this.dragPointIndex = -1\r\n        // 点位数组缓存，用于整体拖动\r\n        this.dragCachePointArr = []\r\n        // 鼠标滑过显示可选择状态\r\n        this.hoverActive = false\r\n        // 始终闭合绘制模式下的当前鼠标移动到的非固定点\r\n        this.areaToPointPos = null\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-10-25 14:19:00 \r\n     * @Desc: 更新配置数据 \r\n     */\r\n    updateOpt(opt) {\r\n        // 配置\r\n        this.opt = {\r\n            ...defaultOpt,\r\n            ...opt\r\n        }\r\n        // 附加数据\r\n        this.data = opt.data || null\r\n        // 线段绘制样式\r\n        this.strokeStyle = opt.strokeStyle ? {\r\n            ...defaultStrokeStyle,\r\n            ...opt.strokeStyle\r\n        } : defaultStrokeStyle\r\n        // 填充样式\r\n        this.fillColor = opt.fillColor || defaultFillColor\r\n        // 端点样式\r\n        this.pointStyle = opt.pointStyle ? {\r\n            ...defaultPointStyle,\r\n            ...opt.pointStyle\r\n        } : defaultPointStyle\r\n        // 是否是闭合绘制模式\r\n        this.area = opt.area || false\r\n        // 是否允许新增节点，仅在闭合情况下的编辑期间\r\n        this.enableAddPoint = opt.enableAddPoint || false\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:17:35 \r\n     * @Desc: 开启编辑 \r\n     */\r\n    enable() {\r\n        this.isEditing = true\r\n        // 插入虚拟顶点\r\n        this.insertFictitiousPoints()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:17:53 \r\n     * @Desc: 结束编辑 \r\n     */\r\n    disable() {\r\n        this.isEditing = false\r\n        // 移除虚拟顶点\r\n        this.removeFictitiousPoints()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-25 14:45:32 \r\n     * @Desc: 获取真实顶点数组 \r\n     */\r\n    getTruePointArr() {\r\n        return this.pointArr.filter((item) => {\r\n            return !item.fictitious\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:24:50 \r\n     * @Desc: 端点数量 \r\n     */\r\n    getPointLength() {\r\n        return this.getTruePointArr().length\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:54:50 \r\n     * @Desc: 添加端点 \r\n     */\r\n    pushPoint(x, y) {\r\n        if (!this.isEditing || this.isClosePath) {\r\n            return\r\n        }\r\n        this.pointArr.push({\r\n            x,\r\n            y\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-11-05 10:41:36 \r\n     * @Desc: 删除某个顶点 \r\n     */\r\n    removePoint(index) {\r\n        // 点击的是虚拟节点直接返回\r\n        if (this.pointArr[index].fictitious) {\r\n            return\r\n        }\r\n        this.pointArr.splice(index, 1)\r\n        // 删除后需要重新创建虚拟节点\r\n        this.removeFictitiousPoints()\r\n        this.insertFictitiousPoints()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-22 09:32:47 \r\n     * @Desc: 始终闭合模式下的当前鼠标移动到的非固定点 \r\n     */\r\n    areaToPoint(x, y) {\r\n        this.areaToPointPos = {\r\n            x,\r\n            y\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:57:47 \r\n     * @Desc: 渲染 \r\n     */\r\n    render() {\r\n        // 填充区域\r\n        if (this.isClosePath || this.area) {\r\n            this.renderArea()\r\n        }\r\n        // 绘制线段\r\n        if (this.opt.lineType === 'custom') {\r\n            this.opt.customRenderLine && this.opt.customRenderLine(this)\r\n        } else if (this.opt.lineType === 'borderLine') {\r\n            this.renderLines(this.strokeStyle)\r\n            this.renderLines({\r\n                ...this.strokeStyle,\r\n                lineWidth: this.strokeStyle.frontLineWidth,\r\n                strokeColor: this.strokeStyle.frontStrokeColor,\r\n                lineJoin: this.strokeStyle.frontLineJoin\r\n            })\r\n        } else {\r\n            this.renderLines(this.strokeStyle)\r\n        }\r\n        // 绘制端点\r\n        this.renderPoints()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 17:04:16 \r\n     * @Desc:  填充区域\r\n     */\r\n    renderArea() {\r\n        this.ctx.save()\r\n        this.ctx.fillStyle = this.fillColor\r\n        this.ctx.beginPath()\r\n        let _pointArr = this.pointArr.concat(this.area ? this.areaToPointPos ? [this.areaToPointPos] : [] : [])\r\n        for (let i = 0; i < _pointArr.length; i++) {\r\n            let x = _pointArr[i].x\r\n            let y = _pointArr[i].y\r\n            if (i === 0) {\r\n                this.ctx.moveTo(x, y)\r\n            } else {\r\n                this.ctx.lineTo(x, y)\r\n            }\r\n        }\r\n        this.ctx.closePath()\r\n        this.ctx.fill()\r\n        this.ctx.restore()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:16:37 \r\n     * @Desc: 绘制线段 \r\n     */\r\n    renderLines({\r\n        lineWidth,\r\n        strokeColor,\r\n        lineJoin\r\n    }, onlyPath) {\r\n        this.ctx.save()\r\n        this.ctx.lineWidth = lineWidth\r\n        this.ctx.strokeStyle = strokeColor\r\n        this.ctx.lineJoin = lineJoin\r\n        this.ctx.beginPath()\r\n        let _pointArr = this.pointArr.concat(this.area ? this.areaToPointPos ? [this.areaToPointPos] : [] : [])\r\n        for (let i = 0; i < _pointArr.length; i++) {\r\n            let x = _pointArr[i].x\r\n            let y = _pointArr[i].y\r\n            if (i === 0) {\r\n                this.ctx.moveTo(x, y)\r\n            } else {\r\n                this.ctx.lineTo(x, y)\r\n            }\r\n        }\r\n        // 闭合路径\r\n        if (this.isClosePath || this.area) {\r\n            this.ctx.closePath()\r\n        }\r\n        // 不实际绘制出来\r\n        if (!onlyPath) {\r\n            this.ctx.stroke()\r\n        }\r\n        this.ctx.restore()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 17:54:18 \r\n     * @Desc:  绘制端点\r\n     */\r\n    renderPoints(onlyPath, callback) {\r\n        for (let i = 0; i < this.pointArr.length; i++) {\r\n            this.ctx.beginPath()\r\n            let x = this.pointArr[i].x\r\n            let y = this.pointArr[i].y\r\n            if (this.isEditing || onlyPath || this.hoverActive) {\r\n                this.drawPoint(x, y, onlyPath, false, this.pointArr[i].fictitious)\r\n                callback && callback(i)\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-25 10:48:01 \r\n     * @Desc: 插入虚拟节点 \r\n     */\r\n    insertFictitiousPoints() {\r\n        if (!this.isEditing || !this.isClosePath || !this.enableAddPoint) {\r\n            return\r\n        }\r\n        // 先去掉虚拟节点\r\n        this.removeFictitiousPoints()\r\n\r\n        let points = []\r\n        let arr = this.pointArr\r\n        let len = arr.length\r\n        for (let i = 0; i < len - 1; i++) {\r\n            let s = arr[i]\r\n            let e = arr[i + 1]\r\n            points.push({\r\n                x: (s.x + e.x) / 2,\r\n                y: (s.y + e.y) / 2,\r\n                fictitious: true\r\n            })\r\n        }\r\n        points.push({\r\n            x: (arr[len - 1].x + arr[0].x) / 2,\r\n            y: (arr[len - 1].y + arr[0].y) / 2,\r\n            fictitious: true\r\n        })\r\n        \r\n        // 插入\r\n        let newArr = []\r\n        for (let i = 0; i < this.pointArr.length; i++) {\r\n            newArr.push(this.pointArr[i])\r\n            newArr.push(points.shift())\r\n        }\r\n\r\n        this.pointArr = newArr\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-25 14:07:12 \r\n     * @Desc:  去掉虚拟节点\r\n     */\r\n    removeFictitiousPoints() {\r\n        this.pointArr = this.getTruePointArr()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 17:57:19 \r\n     * @Desc: 绘制点 \r\n     */\r\n    drawPoint(x, y, onlyPath, beginPath, reverse) {\r\n        let {\r\n            customRenderPoint,\r\n            showPoint,\r\n            pointType,\r\n            pointWidth\r\n        } = this.opt\r\n        if (beginPath) {\r\n            this.ctx.beginPath()\r\n        }\r\n        // 用户自定义绘制端点方法\r\n        if (customRenderPoint) {\r\n            customRenderPoint(this.ctx, x, y, onlyPath, this.pointStyle)\r\n        } else { // 预定义绘制端点方法\r\n            this.ctx.save()\r\n            this.ctx.lineWidth = this.pointStyle.lineWidth\r\n            this.ctx.strokeStyle = this.pointStyle.strokeColor\r\n            this.ctx.fillStyle = this.pointStyle.fillColor\r\n            // 反向样式，边框和填充的颜色互换，用于虚拟节点的显示\r\n            if (reverse) {\r\n                this.ctx.strokeStyle = this.pointStyle.fillColor\r\n                this.ctx.fillStyle = this.pointStyle.strokeColor\r\n            }\r\n            switch (pointType) {\r\n                case 'square':\r\n                    this.ctx.rect(x - pointWidth, y - pointWidth, pointWidth * 2, pointWidth * 2)\r\n                    break;\r\n                case 'circle':\r\n                    this.ctx.arc(x, y, pointWidth * 2, 0, 2 * Math.PI)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            // 不实际绘制出来\r\n            if (!onlyPath) {\r\n                if (showPoint) {\r\n                    this.ctx.fill()\r\n                    this.ctx.stroke()\r\n                }\r\n            }\r\n            this.ctx.restore()\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:14:29 \r\n     * @Desc: 检测某个点是否在该路径内 \r\n     */\r\n    checkInPath(x, y) {\r\n        this.renderLines(this.strokeStyle, true)\r\n        return this.ctx.isPointInPath(x, y)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:48:51 \r\n     * @Desc: 判断某个点是否在某个端点内 \r\n     */\r\n    checkInPoints(x, y) {\r\n        let index = -1\r\n        this.renderPoints(true, (i) => {\r\n            if (this.ctx.isPointInPath(x, y)) {\r\n                index = i\r\n            }\r\n        })\r\n        return index\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:23:34 \r\n     * @Desc: 闭合路径 \r\n     */\r\n    closePath() {\r\n        this.areaToPointPos = null\r\n        this.isClosePath = true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 16:54:34 \r\n     * @Desc: 允许拖动\r\n     */\r\n    enableDrag(pointIndex = -1) {\r\n        this.isDragging = true\r\n        this.dragPointIndex = pointIndex\r\n        this.dragCachePointArr = JSON.parse(JSON.stringify(this.pointArr))\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-25 14:25:32 \r\n     * @Desc: 获取某个顶点在没有虚拟顶点的情况下的真实索引 \r\n     */\r\n    getTruePointIndex(index) {\r\n        if (index === -1 || this.pointArr[index].fictitious) {\r\n            return index\r\n        }\r\n        let count = 0\r\n        for (let i = 0; i < index; i++) {\r\n            if (this.pointArr[i].fictitious) {\r\n                count++\r\n            }\r\n        }\r\n        return index - count\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 18:33:02 \r\n     * @Desc: 停止拖动 \r\n     */\r\n    disableDrag() {\r\n        this.isDragging = false\r\n        this.dragPointIndex = -1\r\n        this.dragCachePointArr = []\r\n        // 拖动结束后恢复虚拟节点的创建\r\n        this.insertFictitiousPoints()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 17:04:23 \r\n     * @Desc: 拖动某个端点\r\n     */\r\n    dragPoint(x, y, ...args) {\r\n        if (!this.isDragging || this.dragPointIndex === -1) {\r\n            return\r\n        }\r\n        // 拖动的是虚拟点，则转换成真实点\r\n        if (this.pointArr[this.dragPointIndex].fictitious) {\r\n            delete this.pointArr[this.dragPointIndex].fictitious\r\n        }\r\n        // 获取某个顶点的真实索引\r\n        this.dragPointIndex = this.getTruePointIndex(this.dragPointIndex)\r\n        // 拖动时隐藏虚拟节点\r\n        this.removeFictitiousPoints()\r\n        if (this.updatePointFn) {\r\n            this.updatePointFn(this, x, y, ...args)\r\n        } else {\r\n            this.pointArr.splice(this.dragPointIndex, 1, {\r\n                ...this.pointArr[this.dragPointIndex],\r\n                x,\r\n                y\r\n            })\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 17:04:32 \r\n     * @Desc: 拖动整体 \r\n     */\r\n    dragAll(ox, oy) {\r\n        if (!this.isDragging) {\r\n            return\r\n        }\r\n        this.pointArr = this.dragCachePointArr.map((item) => {\r\n            return {\r\n                ...item,\r\n                x: item.x + ox,\r\n                y: item.y + oy\r\n            }\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 19:13:34 \r\n     * @Desc: 显示鼠标滑过时可选择状态\r\n     */\r\n    enableHoverActive() {\r\n        this.hoverActive = true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 19:14:02 \r\n     * @Desc: 关闭鼠标滑过时可选择状态\r\n     */\r\n    disableHoverActive() {\r\n        this.hoverActive = false\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 20:23:44 \r\n     * @Desc: 遍历检查线段是否存在交叉情况 \r\n     */\r\n    checkLineSegmentCross() {\r\n        if (!this.checkCrossPrevCheck()) {\r\n            return false\r\n        }\r\n        // 已存在的线段\r\n        let lineSegments = this.createLineSegments(true)\r\n        let len = lineSegments.length\r\n        let cross = false\r\n        for (let i = 0; i < len; i++) {\r\n            let item = lineSegments[i]\r\n            if (this.checkCrossWithLineSegments(item[0], item[1], true)) {\r\n                cross = true\r\n            }\r\n        }\r\n        return cross\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 09:36:33 \r\n     * @Desc: 检查即将形成的线段是否会存在交叉 \r\n     */\r\n    checkNextLineSegmentCross(x, y) {\r\n        if (!this.checkCrossPrevCheck()) {\r\n            return false\r\n        }\r\n        let arr = this.getTruePointArr()\r\n        let len = arr.length\r\n        // 即将形成的线段\r\n        let c = {\r\n            x,\r\n            y\r\n        }\r\n        let d = arr[len - 1]\r\n        return this.checkCrossWithLineSegments(c, d)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 09:37:07 \r\n     * @Desc: 检查最后的闭合线段是否会存在交叉 \r\n     */\r\n    checkEndLineSegmentCross() {\r\n        if (!this.checkCrossPrevCheck()) {\r\n            return false\r\n        }\r\n        let arr = this.getTruePointArr()\r\n        let len = arr.length\r\n        let c = arr[len - 1]\r\n        let d = arr[0]\r\n        return this.checkCrossWithLineSegments(c, d)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 20:27:00 \r\n     * @Desc: 判断某条线段是否会与当前存在的线段交叉 \r\n     */\r\n    checkCrossWithLineSegments(c, d, close) {\r\n        // 已存在的线段\r\n        let lineSegments = this.createLineSegments(close)\r\n        let cross = false\r\n        for (let i = 0; i < lineSegments.length; i++) {\r\n            let item = lineSegments[i]\r\n            let a = item[0]\r\n            let b = item[1]\r\n            if (utils.checkLineSegmentCross(a, b, c, d)) {\r\n                cross = true\r\n            }\r\n        }\r\n        return cross\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 20:24:28 \r\n     * @Desc: 创建已存在点位组成的线段 \r\n     */\r\n    createLineSegments(close) {\r\n        let arr = this.getTruePointArr()\r\n        let len = arr.length\r\n        // 已存在的线段\r\n        let lineSegments = []\r\n        for (let i = 0; i < len - 1; i++) {\r\n            lineSegments.push([\r\n                arr[i],\r\n                arr[i + 1]\r\n            ])\r\n        }\r\n        // 包含起点和终点组成的线段\r\n        if (close) {\r\n            lineSegments.push([\r\n                arr[len - 1],\r\n                arr[0]\r\n            ])\r\n        }\r\n        return lineSegments\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 20:23:59 \r\n     * @Desc: 三个端点以下不可能交叉 \r\n     */\r\n    checkCrossPrevCheck() {\r\n        let len = this.getTruePointArr().length\r\n        // 三个端点以下不可能交叉\r\n        if (len <= 2) {\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-22 10:37:07 \r\n     * @Desc: 获取距离某个点最近的线段 \r\n     */\r\n    getPintNearestLine(x, y) {\r\n        let lineSegments = this.createLineSegments(this.isClosePath)\r\n        if (lineSegments.length <= 0) {\r\n            return null\r\n        }\r\n        if (this.dragPointIndex !== -1) {\r\n            if (this.dragPointIndex === 0) {\r\n                lineSegments.splice(0, 1)\r\n                lineSegments.splice(-1, 1)\r\n            } else {\r\n                lineSegments.splice(this.dragPointIndex - 1, 2)\r\n            }\r\n        }\r\n        let minNum = Infinity\r\n        let minLine\r\n        for (let i = 0; i < lineSegments.length; i++) {\r\n            let item = lineSegments[i]\r\n            let a = item[0]\r\n            let b = item[1]\r\n            let d = utils.getLinePointDistance(a.x, a.y, b.x, b.y, x, y)\r\n            if (d < minNum) {\r\n                minNum = d\r\n                minLine = item\r\n            }\r\n        }\r\n        return [minNum, minLine]\r\n    }\r\n}","import MarkItem from '../markItem'\r\n\r\n/*\r\n配置\r\n{\r\n    value: [\r\n        {\r\n            data: null,//附加数据\r\n            pointArr: [{// 点位数据\r\n                {\"x\":0,\"y\":0}\r\n            }],\r\n            strokeStyle: {},\r\n            fillColor: '',\r\n            pointStyle:{}\r\n        }\r\n    ],// 回显的标注区域数据\r\n    fillColor: String, // 标注区域填充颜色\r\n    strokeStyle: { // 标注轮廓样式\r\n        lineWidth: 3, // 线条宽度\r\n        strokeColor: 'rgba(0, 136, 255, 1)', // 线条颜色\r\n        lineJoin: 'round' // 线条末端样式\r\n    },\r\n    pointStyle: {// 端点的样式\r\n        lineWidth: 3,\r\n        strokeColor: 'rgba(0, 136, 255, 1)',\r\n        fillColor: 'rgba(0, 136, 255, 0.5)'\r\n    },\r\n    showPoint: true,// 是否绘制端点，默认true\r\n    pointType: '',// 端点类型，square（正方形）、circle（圆形），默认square\r\n    pointWidth: 4,// 端点的宽度，正方形的边长的一半、圆形的半径，默认3\r\n    customRenderPoint(ctx, x, y, onlyPath, pointStyle) {// 自定义绘制端点方法\r\n        // ctx（canvas绘图上下文）、x,y（中心点的位置）、onlyPath（为true代表用于检测点是否在该端点路径内时调用，此时不应该实际绘制出来，只要绘制路径即可）、pointStyle（端点样式）\r\n    },\r\n    max: 3,// 同时最多标注对象数量，默认-1，不限制\r\n    hoverActive: false,// 鼠标滑过对象时显示可激活状态，默认false\r\n    readonly: false,// 是否只读，默认false\r\n    single: false,// 是否编辑某个区域时隐藏其他所有区域，默认false\r\n    noCrossing: false,// 是否禁止某个标注对象自身线段交叉，和其他标注对象还是可以交叉的\r\n    dbClickRemovePoint: false,// 是否允许双击顶点删除该顶点\r\n    area: false,// 区域模式，从始至终都是一个闭合的图形\r\n    adsorbent: true,// 是否开启吸附效果\r\n    adsorbentNum: 5,// 吸附的距离，即距离小于等于该值时进行吸附\r\n    adsorbentLine: true,// 是否允许吸附到线段上\r\n    dbClickActive: false,// 是否双击激活标注对象，默认为单击激活\r\n    singleClickComplete: true,// 默认情况下，双击结束编辑，如果该值设为true，除了新增创建期间外的编辑下如果单击了其他区域也可以结束编辑，设为false，即只允许双击结束编辑\r\n    enableAddPoint: false,// 是否允许新增节点，仅在闭合情况下的编辑期间\r\n}\r\n\r\n属性\r\n\r\n事件\r\nCURRENT-MARK-ITEM-CHANGE（当前激活标注对象变化）\r\nHOVER-ITEM（鼠标移到某个标注对象区域内）\r\nCOMPLETE-EDIT-ITEM（双击完成绘制）\r\nIS-CREATE-MARKING-CHANGE（当前是否在创建中状态变化）\r\n\r\n方法\r\n\r\n插件开发\r\n插件需要返回一个promise，resolve之后才会加载下一个插件，所以插件的use顺序十分重要\r\n*/\r\n\r\n// 默认配置\r\nconst defaultOpt = {\r\n    value: [],\r\n    max: -1,\r\n    hoverActive: false,\r\n    readonly: false,\r\n    single: false,\r\n    noCrossing: false,\r\n    dbClickRemovePoint: false,\r\n    area: false,\r\n    adsorbent: true,\r\n    adsorbentNum: 5,\r\n    adsorbentLine: true,\r\n    dbClickActive: false,\r\n    singleClickComplete: true,\r\n    enableAddPoint: false\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-15 10:25:23 \r\n * @Desc: 编辑插件\r\n */\r\nexport default function EditPlugin(instance, utils) {\r\n    let _resolve = null\r\n    let promise = new Promise((resolve) => {\r\n        _resolve = resolve\r\n    })\r\n    let opt = {\r\n        ...defaultOpt,\r\n        ...instance.opt\r\n    }\r\n    // 修改鼠标插件的默认配置\r\n    if (opt.dbClickActive) {\r\n        if (instance.opt.cursorTips) {\r\n            if (!instance.opt.cursorTips.HOVER) {\r\n                instance.opt.cursorTips.HOVER = '双击激活该区域并进入编辑状态'\r\n            }\r\n        } else {\r\n            instance.opt.cursorTips = {\r\n                HOVER: '双击激活该区域并进入编辑状态'\r\n            }\r\n        }\r\n    }\r\n    // 全部的标注对象列表\r\n    let markItemList = []\r\n    // 当前编辑中的标注对象\r\n    let curEditingMarkItem = null\r\n    // 拖动整体时的起始位置\r\n    let dragStartPos = {\r\n        x: 0,\r\n        y: 0\r\n    }\r\n    // 缓存一份拖动整体时的起始位置\r\n    let dragStartPosCache = {\r\n        x: 0,\r\n        y: 0\r\n    }\r\n    // 编辑中\r\n    let isReadonly = opt.readonly\r\n    // 是否新增标注中，不包括闭合后的编辑\r\n    let isCreateMarking = false\r\n    // 创建新标注时的配置项\r\n    let createMarkItemOpt = null\r\n    // 缓存点位数据\r\n    let cachePointArr = null\r\n    // 标注对象递增id\r\n    let mId = 0\r\n    // 当前的吸附值，用来在修正点击事件要新增的顶点的坐标值\r\n    let adsorbentedPos = null\r\n    // 吸附整体时的偏移量\r\n    let adsorbentedWholePos = [0, 0]\r\n    // 用来控制整体吸附后的脱离\r\n    let adsorbentedWholePosCacheMousePos = {x: 0, y: 0}\r\n    // 刚才是否处于拖动中，用来修复click事件比mouseup事件慢的问题\r\n    let lastIsDragging = false\r\n    // 创建一个只用于渲染吸附时的顶点的标注对象\r\n    let adsorbentMark = createNewMarkItem()\r\n    // 鼠标按下和松开的距离\r\n    let mousedownPos = {\r\n        x: 0,\r\n        y: 0\r\n    }\r\n    let mouseupPos = {\r\n        x: 0,\r\n        y: 0\r\n    }\r\n\r\n    // 监听配置更新事件\r\n    instance.on('UPDATED_OPT', (o) => {\r\n        opt = {\r\n            ...defaultOpt,\r\n            ...instance.opt\r\n        }\r\n        instance.clearCanvas()\r\n        markItemList.forEach((item) => {\r\n            item.updateOpt(opt)\r\n            item.render()\r\n        })\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 15:54:21 \r\n     * @Desc: 回显数据 \r\n     */\r\n    function reShow() {\r\n        if (opt.value.length > 0) {\r\n            opt.value.forEach((item) => {\r\n                let _markItem = new MarkItem(instance.ctx, {\r\n                    id: mId++,\r\n                    ...opt,\r\n                    ...item,\r\n                    pointArr: item.pointArr.map((point) => {\r\n                        return {\r\n                            x: point.x * instance.canvasEleRectInfo.width,\r\n                            y: point.y * instance.canvasEleRectInfo.height\r\n                        }\r\n                    }),\r\n                })\r\n                _markItem.closePath()\r\n                markItemList.push(_markItem)\r\n            })\r\n            render()\r\n        }\r\n    }\r\n    reShow()\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 15:34:49 \r\n     * @Desc: 获取所有变量的值 \r\n     */\r\n    function getState() {\r\n        return {\r\n            markItemList,\r\n            curEditingMarkItem,\r\n            isReadonly,\r\n            isCreateMarking\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 16:46:38 \r\n     * @Desc: 创建新标注对象实例 \r\n     */\r\n    function createNewMarkItem(plusOpt = {}) {\r\n        return new MarkItem(instance.ctx, {\r\n            id: mId++,\r\n            ...opt,\r\n            ...createMarkItemOpt,\r\n            ...plusOpt,\r\n            area: opt.area\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:56:19 \r\n     * @Desc: 绘制 \r\n     */\r\n    function render() {\r\n        instance.clearCanvas()\r\n        if (opt.single && (curEditingMarkItem || isCreateMarking)) {\r\n            curEditingMarkItem && curEditingMarkItem.render()\r\n        } else {\r\n            markItemList.forEach((item) => {\r\n                item.render()\r\n            })\r\n        }\r\n        // 渲染吸附提示点\r\n        if (adsorbentedPos) {\r\n            adsorbentMark.drawPoint(adsorbentedPos[0], adsorbentedPos[1], false, true)\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:25:19 \r\n     * @Desc: 清除对象的编辑状态\r\n     */\r\n    function disableAllItemsEdit() {\r\n        markItemList.forEach((item) => {\r\n            item.disable()\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 19:14:36 \r\n     * @Desc: 清除对象鼠标滑过显示可选择状态 \r\n     */\r\n    function disableAllItemsHoverActive() {\r\n        markItemList.forEach((item) => {\r\n            item.disableHoverActive()\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:07:31 \r\n     * @Desc: 检查包含某个点的标注对象 \r\n     *  从后往前遍历是因为后面绘制的层级更高\r\n     */\r\n    function checkInPathItem(x, y) {\r\n        for (let i = markItemList.length - 1; i >= 0; i--) {\r\n            let item = markItemList[i]\r\n            if (item.checkInPath(x, y) || item.checkInPoints(x, y) !== -1) {\r\n                return item\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-11-02 17:48:18 \r\n     * @Desc: 找出所有包含该点的标注对象 \r\n     */\r\n    function checkInPathAllItems(x, y) {\r\n        let items = []\r\n        for (let i = markItemList.length - 1; i >= 0; i--) {\r\n            let item = markItemList[i]\r\n            if (item.checkInPath(x, y) || item.checkInPoints(x, y) !== -1) {\r\n                items.push(item) \r\n            }\r\n        }\r\n        return items\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 20:00:59 \r\n     * @Desc: 获取标注点位数据 \r\n     */\r\n    function getMarkData() {\r\n        return markItemList.map((item) => {\r\n            let pointArr = item.pointArr.map((point) => {\r\n                return {\r\n                    x: point.x / instance.canvasEleRectInfo.width,\r\n                    y: point.y / instance.canvasEleRectInfo.height\r\n                }\r\n            })\r\n            return {\r\n                data: item.data,\r\n                pointArr\r\n            }\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 11:29:16 \r\n     * @Desc: 当前是否正在创建新标注中，即当前标注还未闭合 \r\n     */\r\n    function getIsCreateIngMarkItem () {\r\n        return curEditingMarkItem && !curEditingMarkItem.isClosePath\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 09:41:24 \r\n     * @Desc: 开启编辑模式 \r\n     */\r\n    function enableEdit () {\r\n        isReadonly = false\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 14:58:24 \r\n     * @Desc: 清除所有状态 \r\n     */\r\n    function reset() {\r\n        disableAllItemsHoverActive()\r\n        disableAllItemsEdit()\r\n        setMarkEditItem(null)\r\n        render()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 09:41:40 \r\n     * @Desc: 开启只读模式，返回false代表当前有正在编辑中的对象，不能结束编辑\r\n     */\r\n    function disableEdit () {\r\n        if (getIsCreateIngMarkItem()) {\r\n            return false\r\n        }\r\n        reset()\r\n        isReadonly = true\r\n        return true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 09:49:13 \r\n     * @Desc: 设置当前创建状态\r\n     */\r\n    function setIsCreateMarking (state) {\r\n        if (isReadonly) {\r\n            return false\r\n        }\r\n        isCreateMarking = state\r\n        instance.emit('IS-CREATE-MARKING-CHANGE', state)\r\n        return true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 11:03:49 \r\n     * @Desc: 创建新标注，返回false代表不能创建新标注\r\n     * _opt：配置项，可添加MarkItem的所有配置项\r\n     */\r\n    function createMarkItem(_opt = null) {\r\n        if (getIsCreateIngMarkItem() || isReadonly) {\r\n            return false\r\n        }\r\n        reset()\r\n        createMarkItemOpt = _opt\r\n        // 创建时传了点位数据那么直接新增一个标注\r\n        if (createMarkItemOpt && createMarkItemOpt.pointArr && createMarkItemOpt.pointArr.length > 0) {\r\n            let _markItem = createNewMarkItem({\r\n                pointArr: createMarkItemOpt.pointArr.map((point) => {\r\n                    return {\r\n                        x: point.x * instance.canvasEleRectInfo.width,\r\n                        y: point.y * instance.canvasEleRectInfo.height\r\n                    }\r\n                })\r\n            })\r\n            _markItem.closePath()\r\n            markItemList.push(_markItem)\r\n            render()\r\n        } else {\r\n            setIsCreateMarking(true)\r\n        }\r\n        if (opt.single) {\r\n            instance.clearCanvas()\r\n        }\r\n        return true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-21 18:58:23 \r\n     * @Desc: 取消/退出创建\r\n     * single为true的情况下编辑某个区域想要退出时可以调用reset方法\r\n     */\r\n    function exitCreate() {\r\n        if (!isCreateMarking) {\r\n            return false\r\n        } \r\n        setIsCreateMarking(false)\r\n        if (getIsCreateIngMarkItem()) {\r\n            let index = markItemList.findIndex((item) => {\r\n                return item === curEditingMarkItem\r\n            })\r\n            markItemList.splice(index, 1)\r\n        }\r\n        reset()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 09:49:13 \r\n     * @Desc: 设置当前激活标注对象 \r\n     */\r\n    function setMarkEditItem (item) {\r\n        if (isReadonly) {\r\n            return false\r\n        }\r\n        curEditingMarkItem = item\r\n        instance.emit('CURRENT-MARK-ITEM-CHANGE', item)\r\n        return true\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 10:31:25 \r\n     * @Desc: 删除指定标注对象 \r\n     */\r\n    function deleteMarkItem (item) {\r\n        if (!item) {\r\n            return false\r\n        }\r\n        let index = markItemList.findIndex((i) => {\r\n            return i === item\r\n        })\r\n        if (index !== -1) {\r\n            if (curEditingMarkItem === item) {\r\n                setMarkEditItem(null)\r\n            }\r\n            let deleteItem = markItemList.splice(index, 1)\r\n            render()\r\n            instance.emit('DELETE-MARKING-ITEM', deleteItem[0], index)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 10:31:33 \r\n     * @Desc: 删除所有标注对象 \r\n     */\r\n    function deleteAllMarkItem () {\r\n        markItemList = []\r\n        setMarkEditItem(null)\r\n        render()\r\n        instance.emit('DELETE-ALL-MARKING-ITEM')\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-22 09:50:40 \r\n     * @Desc: 吸附效果 \r\n     */\r\n    function checkAdsorbent(x, y) {\r\n        if (!opt.adsorbent) {\r\n            return [x, y]\r\n        }\r\n        let min = Infinity\r\n        let _x = x, _y = y\r\n        let _adsorbentedPos = null\r\n        markItemList.forEach((item) => {\r\n            // 端点\r\n            item.pointArr.forEach((point, index) => {\r\n                // 跳过自己和自己的比较\r\n                if (curEditingMarkItem && item === curEditingMarkItem && item.dragPointIndex === index) {\r\n                    return\r\n                }\r\n                let d = utils.getTwoPointDistance(point.x, point.y, x, y)\r\n                if (d <= opt.adsorbentNum && d < min) {\r\n                    min = d\r\n                    _x = point.x\r\n                    _y = point.y\r\n                    _adsorbentedPos = [_x, _y]\r\n                }\r\n            })\r\n            // 线段\r\n            if (opt.adsorbentLine) {\r\n                let nearestLine = item.getPintNearestLine(x, y)\r\n                if (nearestLine && nearestLine[0] <= opt.adsorbentNum) {\r\n                    let points = nearestLine[1]\r\n                    let pointA = points[0]\r\n                    let pointB = points[1]\r\n                    let minx = Math.min(pointA.x, pointB.x)\r\n                    let maxx = Math.max(pointA.x, pointB.x)\r\n                    if (x >= minx && x <= maxx) {\r\n                        let nearestPoint = utils.getNearestPointFromLine(pointA.x, pointA.y, pointB.x, pointB.y, x, y)\r\n                        _x = nearestPoint[0]\r\n                        _y = nearestPoint[1]\r\n                        _adsorbentedPos = [_x, _y]\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        adsorbentedPos = _adsorbentedPos\r\n        return [_x, _y]\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-01-23 11:11:01 \r\n     * @Desc: 吸附整体 \r\n     */\r\n    function checkAdsorbentWhole(x, y) {\r\n        if (!opt.adsorbent) {\r\n            return [x, y]\r\n        }\r\n        let min = Infinity\r\n        let minPoint = null\r\n        let minPoint2 = null\r\n        // 遍历当前图形和其他图形最近的两个顶点\r\n        curEditingMarkItem.pointArr.forEach((pointItem) => {\r\n            markItemList.forEach((markItem) => {\r\n                if (markItem !== curEditingMarkItem) {\r\n                    markItem.pointArr.forEach((markItemPointItem) =>{\r\n                        let d = utils.getTwoPointDistance(pointItem.x, pointItem.y, markItemPointItem.x, markItemPointItem.y)\r\n                        if (d < min) {\r\n                            min = d\r\n                            minPoint = pointItem\r\n                            minPoint2 = markItemPointItem\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        })\r\n        if (min <= opt.adsorbentNum) {\r\n            adsorbentedWholePos = [minPoint2.x - minPoint.x, minPoint2.y - minPoint.y]\r\n            dragStartPos.x -= adsorbentedWholePos[0]\r\n            dragStartPos.y -= adsorbentedWholePos[1]\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:12:55 \r\n     * @Desc: 监听单击事件 \r\n     */\r\n    instance.on('CLICK', (e) => {\r\n        if (!opt.mobile && (Math.abs(mouseupPos.x - mousedownPos.x) >= 5 || Math.abs(mouseupPos.y - mousedownPos.y) >= 5)) {\r\n            return\r\n        }\r\n        if (isReadonly) {\r\n            return\r\n        }\r\n        if (!opt.mobile && lastIsDragging) {\r\n            lastIsDragging = false\r\n            return\r\n        }\r\n        let {\r\n            x,\r\n            y\r\n        } = instance.toCanvasPos(e)\r\n        // 检查点击的位置是否存在标注对象\r\n        let inPathItem = null\r\n         // 创建新对象\r\n        if (isCreateMarking) {\r\n            let _x = x\r\n            let _y = y\r\n            // 如果存在吸附数据则使用吸附数据\r\n            if (adsorbentedPos) {\r\n                _x = adsorbentedPos[0]\r\n                _y = adsorbentedPos[1]\r\n                adsorbentedPos = null\r\n            }\r\n            // 当前存在尚未闭合的激活对象\r\n            if (curEditingMarkItem) {\r\n                // 检查线段是否交叉\r\n                if (opt.noCrossing) {\r\n                    let cross = curEditingMarkItem.checkNextLineSegmentCross(_x, _y)\r\n                    if (cross) {\r\n                        instance.emit('LINE-CROSS', curEditingMarkItem)\r\n                    } else {\r\n                        curEditingMarkItem.pushPoint(_x, _y)\r\n                    }\r\n                } else {\r\n                    curEditingMarkItem.pushPoint(_x, _y)\r\n                }\r\n            } else {// 当前没有这种标注中的对象\r\n                // 数量判断\r\n                if (opt.max === -1 || markItemList.length < opt.max) {\r\n                    disableAllItemsEdit()\r\n                    setMarkEditItem(createNewMarkItem())\r\n                    curEditingMarkItem.enable()\r\n                    curEditingMarkItem.pushPoint(_x, _y)\r\n                    markItemList.push(curEditingMarkItem)\r\n                } else { // 超出数量限制\r\n                    instance.emit('COUNT-LIMIT', curEditingMarkItem)\r\n                    setIsCreateMarking(false)\r\n                }\r\n            }\r\n        } else if (inPathItem = checkInPathItem(x, y)) { // 当前点击的位置存在标注对象\r\n            // !(opt.single && curEditingMarkItem) && \r\n            if (!opt.dbClickActive && !checkInPathAllItems(x, y).includes(curEditingMarkItem)) {\r\n                if (!opt.single || (opt.single && !curEditingMarkItem)) {\r\n                    disableAllItemsEdit()\r\n                    inPathItem.enable()\r\n                    setMarkEditItem(inPathItem)\r\n                }\r\n            }\r\n        } else {// 点击空白处清除当前所有状态\r\n            if (!opt.single && opt.singleClickComplete) {\r\n                reset()\r\n            }\r\n        }\r\n        render()\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:14:57 \r\n     * @Desc: 监听双击事件 \r\n     */\r\n    instance.on('DOUBLE-CLICK', (e) => {\r\n        if (isReadonly) {\r\n            return\r\n        }\r\n        let {\r\n            x,\r\n            y\r\n        } = instance.toCanvasPos(e)\r\n        // 能否激活其他对象\r\n        let canActive = true\r\n        // 检查当前双击的位置最上层的编辑对象\r\n        let inPathItem = checkInPathItem(x, y)\r\n        // 检查当前双击的对象是否和当前编辑中的对象是同一个\r\n        let isSame = inPathItem && curEditingMarkItem ? inPathItem === curEditingMarkItem : false\r\n        // 当前存在编辑中的对象\r\n        if (curEditingMarkItem) {\r\n            // 点击的是顶点\r\n            let inPointIndex = curEditingMarkItem.checkInPoints(x, y)\r\n            if (opt.dbClickRemovePoint && inPointIndex !== -1) {\r\n                canActive = false\r\n                if (curEditingMarkItem.getPointLength() > 3) {\r\n                    curEditingMarkItem.removePoint(inPointIndex)\r\n                    render()\r\n                } else {\r\n                    instance.emit('NOT-ENOUGH-POINTS-REMOVE', curEditingMarkItem)\r\n                }\r\n            } else {\r\n                // 端点数量不足三个\r\n                if (curEditingMarkItem.getPointLength() < 3) {\r\n                    canActive = false\r\n                    instance.emit('NOT-ENOUGH-END-POINTS', curEditingMarkItem)\r\n                } else if (opt.noCrossing && curEditingMarkItem.checkEndLineSegmentCross()) {// 线段存在交叉\r\n                    canActive = false\r\n                    instance.emit('LINE-CROSS', curEditingMarkItem)\r\n                } else {\r\n                    if (isCreateMarking) {\r\n                        instance.emit('COMPLETE-CREATE-ITEM', curEditingMarkItem, e)\r\n                    }\r\n                    setIsCreateMarking(false)\r\n                    curEditingMarkItem.closePath()\r\n                    curEditingMarkItem.disable()\r\n                    adsorbentedPos = null\r\n                    setMarkEditItem(null)\r\n                    render()\r\n                    instance.emit('COMPLETE-EDIT-ITEM', curEditingMarkItem, e)\r\n                }\r\n            }\r\n        }\r\n        // 双击激活标注对象\r\n        if (opt.dbClickActive && !isCreateMarking && canActive && inPathItem && !isSame) {\r\n            disableAllItemsEdit()\r\n            inPathItem.enable()\r\n            setMarkEditItem(inPathItem)\r\n            render()\r\n        }\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 15:43:14 \r\n     * @Desc: 监听鼠标按下事件 \r\n     */\r\n    instance.on('MOUSEDOWN', (e) => {\r\n        mousedownPos = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        }\r\n        if (isReadonly) {\r\n            return\r\n        }\r\n        let {\r\n            x,\r\n            y\r\n        } = instance.toCanvasPos(e)\r\n        if (!curEditingMarkItem || !curEditingMarkItem.isEditing || !curEditingMarkItem.isClosePath) {\r\n            return\r\n        }\r\n        // 判断是否在端点内\r\n        let inPointIndex = curEditingMarkItem.checkInPoints(x, y)\r\n        // 是否在路径内\r\n        let isInPath = curEditingMarkItem.checkInPath(x, y)\r\n        if (isInPath || inPointIndex !== -1) {\r\n            if (opt.noCrossing) {\r\n                cachePointArr = JSON.parse(JSON.stringify(curEditingMarkItem.pointArr))\r\n            }\r\n            dragStartPos.x = x\r\n            dragStartPos.y = y\r\n            dragStartPosCache.x = x\r\n            dragStartPosCache.y = y\r\n            curEditingMarkItem.enableDrag(inPointIndex)\r\n        }\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 16:57:32 \r\n     * @Desc: 监听鼠标移动事件 \r\n     */\r\n    instance.on('MOUSEMOVE', (e, mobileEvent) => {\r\n        if (isReadonly) {\r\n            return\r\n        }\r\n        let {\r\n            x,\r\n            y\r\n        } = instance.toCanvasPos(e)\r\n        // 拖动编辑\r\n        if (curEditingMarkItem && curEditingMarkItem.isDragging) {\r\n            if (!instance.opt.mobile) {\r\n                e.stopPropagation()\r\n                e.preventDefault()\r\n            } else {\r\n                mobileEvent.stopPropagation()\r\n                mobileEvent.preventDefault()\r\n            }\r\n            if (curEditingMarkItem.dragPointIndex !== -1) {// 拖动单个顶点\r\n                curEditingMarkItem.dragPoint(...checkAdsorbent(x, y), instance)\r\n            } else {// 拖动整体图形\r\n                checkAdsorbentWhole()\r\n                // 控制吸附后的脱离\r\n                if (adsorbentedWholePos[0] !== 0 && adsorbentedWholePos[1] !== 0 && adsorbentedWholePosCacheMousePos.x === 0 && adsorbentedWholePosCacheMousePos.y === 0) {\r\n                    adsorbentedWholePosCacheMousePos.x = x\r\n                    adsorbentedWholePosCacheMousePos.y = y\r\n                }\r\n                if (adsorbentedWholePosCacheMousePos.x !== 0 && adsorbentedWholePosCacheMousePos.y !== 0) {\r\n                    if (utils.getTwoPointDistance(adsorbentedWholePosCacheMousePos.x, adsorbentedWholePosCacheMousePos.y, x, y) > opt.adsorbentNum) {\r\n                        adsorbentedWholePos = [0, 0]\r\n                        dragStartPos.x = dragStartPosCache.x\r\n                        dragStartPos.y = dragStartPosCache.y\r\n                        adsorbentedWholePosCacheMousePos.x = 0\r\n                        adsorbentedWholePosCacheMousePos.y = 0\r\n                    }\r\n                }\r\n                let ox = x - dragStartPos.x\r\n                let oy = y - dragStartPos.y\r\n                curEditingMarkItem.dragAll(ox, oy)\r\n            }\r\n            render()\r\n            let inPointIndex = curEditingMarkItem.checkInPoints(x, y)\r\n            instance.emit('HOVER-ITEM', curEditingMarkItem, curEditingMarkItem, checkInPathAllItems(x, y), e, inPointIndex)\r\n        } else if(isCreateMarking) {// 创建新标注中\r\n            let ox = x - dragStartPos.x\r\n            let oy = y - dragStartPos.y\r\n            let apos = checkAdsorbent(ox, oy)\r\n            // 始终闭合模式\r\n            if (opt.area && curEditingMarkItem) {\r\n                curEditingMarkItem.areaToPoint(...apos)\r\n            }\r\n            render()\r\n        } else if(!isCreateMarking){// 显示可选择状态\r\n            let inPathItem = checkInPathItem(x, y)\r\n            // 鼠标滑过显示可选择状态\r\n            if (opt.hoverActive && (!curEditingMarkItem || curEditingMarkItem.isClosePath)) {\r\n                disableAllItemsHoverActive()\r\n                inPathItem && inPathItem.enableHoverActive()\r\n                render()\r\n            }\r\n            if (inPathItem && inPathItem.isClosePath) {\r\n                let inPointIndex = inPathItem.checkInPoints(x, y)\r\n                instance.emit('HOVER-ITEM', inPathItem, curEditingMarkItem, checkInPathAllItems(x, y), e, inPointIndex)\r\n            }\r\n        }\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 18:31:56 \r\n     * @Desc: 监听鼠标松开事件 \r\n     */\r\n    instance.on('MOUSEUP', (e) => {\r\n        mouseupPos = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        }\r\n        if (isReadonly) {\r\n            return\r\n        }\r\n        if (curEditingMarkItem && curEditingMarkItem.isDragging) {\r\n            lastIsDragging = true\r\n            curEditingMarkItem.disableDrag()\r\n            dragStartPos.x = 0\r\n            dragStartPos.y = 0\r\n            dragStartPosCache.x = 0\r\n            dragStartPosCache.y = 0\r\n            if (opt.noCrossing && curEditingMarkItem.checkLineSegmentCross()) {\r\n                instance.emit('LINE-CROSS', curEditingMarkItem)\r\n                curEditingMarkItem.pointArr = cachePointArr\r\n                cachePointArr = null\r\n            }\r\n            render()\r\n        }\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 09:42:10 \r\n     * @Desc: 暴露方法给实例引用 \r\n     */\r\n    instance._disableAllItemsEdit = disableAllItemsEdit\r\n    instance._setMarkEditItem = setMarkEditItem\r\n    instance._createNewMarkItem = createNewMarkItem\r\n    instance._setIsCreateMarking = setIsCreateMarking\r\n    instance._render = render\r\n    instance._disableAllItemsHoverActive = disableAllItemsHoverActive\r\n    instance._checkInPathItem = checkInPathItem\r\n    instance._checkInPathAllItems = checkInPathAllItems\r\n    instance._getIsCreateIngMarkItem = getIsCreateIngMarkItem\r\n\r\n    instance.getState = getState\r\n    instance.getMarkData = getMarkData\r\n    instance.enableEdit = enableEdit\r\n    instance.disableEdit = disableEdit\r\n    instance.deleteMarkItem = deleteMarkItem\r\n    instance.deleteAllMarkItem = deleteAllMarkItem\r\n    instance.createMarkItem = createMarkItem\r\n    instance.exitCreate = exitCreate\r\n    instance.reset = reset\r\n\r\n    _resolve()\r\n    return promise\r\n}","import Observer from './src/observer'\r\nimport utils from './src/utils'\r\nimport editPlugin from './src/plugins/edit'\r\nimport merge from 'deepmerge'\r\n\r\n/*\r\n配置\r\n{\r\n    el: Object, // 容器元素，dom元素或选择器字符串\r\n    dbClickTime: 200,// 双击间隔事件，默认200ms\r\n    mobile: false// 是否是移动端模式，默认false\r\n}\r\n\r\n事件\r\non(event, callback)，事件监听，CLICK、DOUBLE-CLICK、MOUSEDOWN、MOUSEMOVE、MOUSEUP、MOUSEENTER、MOUSELEAVE、WINDOW-CLICK\r\n*/\r\n\r\n// 默认配置\r\nconst defaultOpt = {\r\n    dbClickTime: 200,\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-09-27 14:02:06 \r\n * @Desc: 标注库 \r\n */\r\nclass Markjs {\r\n    static pluginList = []\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 10:27:23 \r\n     * @Desc: 安装插件 \r\n     */\r\n    static use(plugin, index = -1) {\r\n        if (!plugin) {\r\n            return\r\n        }\r\n        if (plugin.used) {\r\n            return this\r\n        }\r\n        plugin.used = true\r\n        if (index === -1) {\r\n            Markjs.pluginList.push(plugin)\r\n        } else {\r\n            Markjs.pluginList.splice(index, 0, plugin)\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 14:02:12 \r\n     * @Desc: 构造函数 \r\n     */\r\n    constructor(opt = {}) {\r\n        if (!opt.el) {\r\n            throw new Error('el属性为空')\r\n        }\r\n        // 配置项\r\n        this.opt = {\r\n            ...defaultOpt,\r\n            ...opt\r\n        }\r\n        // 容器元素\r\n        this.el = this.originEl = typeof opt.el === 'string' ? document.querySelector(opt.el) : opt.el\r\n        if (!this.el) {\r\n            throw new Error('容器元素获取失败')\r\n        }\r\n        // 创建一个新的容器\r\n        this.crateContainer()\r\n        // 容器元素的尺寸信息\r\n        this.elRectInfo = null\r\n        // canvas元素\r\n        this.canvasEle = null\r\n        // 绘图元素尺寸信息\r\n        this.canvasEleRectInfo = null\r\n        // 绘图上下文\r\n        this.ctx = null\r\n        // 单击定时器\r\n        this.clickTimer = null\r\n        // 发布订阅对象\r\n        this.observer = new Observer()\r\n        // 鼠标按下的位置\r\n        this.mousedownPos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        // 鼠标松开的位置\r\n        this.mouseupPos = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n        // 鼠标上次点击的时间\r\n        this.lastClickTime = 0\r\n\r\n        // 固化事件函数的this\r\n        this.bindEventCallback()\r\n        // 初始化\r\n        this.init()\r\n        // 注册插件\r\n        this.usePlugins()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-10-25 13:52:52 \r\n     * @Desc: 更新配置 \r\n     */\r\n    updateOpt(newOpt) {\r\n        this.opt = merge(this.opt, newOpt)\r\n        this.emit('UPDATED_OPT', this.opt)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 10:35:33 \r\n     * @Desc: 注册插件 \r\n     */\r\n    usePlugins() {\r\n        let index = 0\r\n        let len = Markjs.pluginList.length\r\n        let loopUse = () => {\r\n            if (index >= len) {\r\n                this.emit('PLUGINS_LOADED')\r\n                return\r\n            }\r\n            let cur = Markjs.pluginList[index]\r\n            cur(this, utils).then(() => {\r\n                index++\r\n                loopUse()\r\n            })\r\n        }\r\n        loopUse()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-10-25 14:03:12 \r\n     * @Desc: 触发事件 \r\n     */\r\n    emit(event, ...args) {\r\n        this.observer.publish(event, ...args)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 13:54:58 \r\n     * @Desc: 监听事件 \r\n     */\r\n    on(event, callback) {\r\n        return this.observer.subscribe(event, callback)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 13:56:06 \r\n     * @Desc: 解除监听事件 \r\n     */\r\n    off(token) {\r\n        this.observer.unsubscribe(token)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2022-07-14 09:38:12 \r\n     * @Desc: 创建一个新的容器 \r\n     */\r\n    crateContainer() {\r\n        let newEl = document.createElement('div')\r\n        newEl.className = 'markjsContainer'\r\n        newEl.style.cssText = `\r\n            position: relative;\r\n            width: 100%;\r\n            height: 100%;\r\n        `\r\n        this.el.style.overflow = 'hidden'\r\n        this.el.appendChild(newEl)\r\n        this.el = newEl\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 14:06:54 \r\n     * @Desc: 初始化 \r\n     */\r\n    init() {\r\n        this.createElement()\r\n        this.ctx = this.canvasEle.getContext('2d')\r\n        this.bindEvent()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:11:03 \r\n     * @Desc: 销毁 \r\n     */\r\n    destroy() {\r\n        this.unbindEvent()\r\n        this.el.removeChild(this.canvasEle)\r\n        this.emit('DESTORY')\r\n        this.observer.clearAll()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 14:26:19 \r\n     * @Desc: 创建元素 \r\n     */\r\n    createElement() {\r\n        this.elRectInfo = this.el.getBoundingClientRect()\r\n        let {\r\n            width,\r\n            height\r\n        } = this.elRectInfo\r\n        this.canvasEle = document.createElement('canvas')\r\n        this.canvasEle.width = width\r\n        this.canvasEle.height = height\r\n        this.canvasEleRectInfo = {\r\n            width,\r\n            height\r\n        }\r\n        this.el.appendChild(this.canvasEle)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 16:55:53 \r\n     * @Desc:  固化事件函数的this\r\n     */\r\n    bindEventCallback() {\r\n        this.onclick = this.onclick.bind(this)\r\n        this.onmousedown = this.onmousedown.bind(this)\r\n        this.onmousemove = this.onmousemove.bind(this)\r\n        this.onmouseup = this.onmouseup.bind(this)\r\n        this.onmouseenter = this.onmouseenter.bind(this)\r\n        this.onmouseleave = this.onmouseleave.bind(this)\r\n        this.onWindowClick = this.onWindowClick.bind(this)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 14:55:12 \r\n     * @Desc: 绑定事件 \r\n     */\r\n    bindEvent() {\r\n        let isMobile = this.opt.mobile\r\n        this.canvasEle.addEventListener('click', this.onclick)\r\n        this.canvasEle.addEventListener(isMobile ? 'touchstart' : 'mousedown', this.onmousedown)\r\n        this.canvasEle.addEventListener(isMobile ? 'touchmove' : 'mousemove', this.onmousemove)\r\n        window.addEventListener(isMobile ? 'touchend' : 'mouseup', this.onmouseup)\r\n        this.canvasEle.addEventListener('mouseenter', this.onmouseenter)\r\n        this.canvasEle.addEventListener('mouseleave', this.onmouseleave)\r\n        window.addEventListener('click', this.onWindowClick)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 14:57:23 \r\n     * @Desc: 解绑事件 \r\n     */\r\n    unbindEvent() {\r\n        let isMobile = this.opt.mobile\r\n        this.canvasEle.removeEventListener('click', this.onclick)\r\n        this.canvasEle.removeEventListener(isMobile ? 'touchstart' : 'mousedown', this.onmousedown)\r\n        this.canvasEle.removeEventListener(isMobile ? 'touchmove' : 'mousemove', this.onmousemove)\r\n        window.removeEventListener(isMobile ? 'touchend' : 'mouseup', this.onmouseup)\r\n        this.canvasEle.removeEventListener('mouseenter', this.onmouseenter)\r\n        this.canvasEle.removeEventListener('mouseleave', this.onmouseleave)\r\n        window.removeEventListener('click', this.onWindowClick)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:04:50 \r\n     * @Desc: 单击事件 \r\n     */\r\n    onclick(e) {\r\n        if (this.clickTimer) {\r\n            clearTimeout(this.clickTimer)\r\n            this.clickTimer = null\r\n        }\r\n\r\n        this.clickTimer = setTimeout(() => {\r\n            this.emit('CLICK', e)\r\n        }, this.opt.dbClickTime);\r\n\r\n        if (Date.now() - this.lastClickTime <= this.opt.dbClickTime) {\r\n            clearTimeout(this.clickTimer)\r\n            this.clickTimer = null\r\n            this.lastClickTime = 0\r\n            this.emit('DOUBLE-CLICK', e)\r\n        }\r\n\r\n        this.lastClickTime = Date.now()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:02:26 \r\n     * @Desc: 鼠标按下事件 \r\n     */\r\n    onmousedown(e) {\r\n        let mobileEvent = null\r\n        if (this.opt.mobile) {\r\n            mobileEvent = e\r\n            e = e.touches[0]\r\n        }\r\n        this.mousedownPos = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        }\r\n        this.emit('MOUSEDOWN', e, mobileEvent)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:02:26 \r\n     * @Desc: 鼠标移动事件 \r\n     */\r\n    onmousemove(e) {\r\n        let mobileEvent = null\r\n        if (this.opt.mobile) {\r\n            mobileEvent = e\r\n            e = e.touches[0]\r\n        }\r\n        this.emit('MOUSEMOVE', e, mobileEvent)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:02:26 \r\n     * @Desc: 鼠标松开事件 \r\n     */\r\n    onmouseup(e) {\r\n        let mobileEvent = null\r\n        if (this.opt.mobile) {\r\n            mobileEvent = e\r\n            e = e.touches[0]\r\n        }\r\n        if (!e) {\r\n            e = {\r\n                clientX: 0,\r\n                clientY: 0\r\n            }\r\n        }\r\n        this.mouseupPos = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        }\r\n        this.emit('MOUSEUP', e, mobileEvent)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:05:29 \r\n     * @Desc: 鼠标移入事件 \r\n     */\r\n    onmouseenter(e) {\r\n        this.emit('MOUSEENTER', e)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:06:28 \r\n     * @Desc: 鼠标移出事件 \r\n     */\r\n    onmouseleave(e) {\r\n        this.emit('MOUSELEAVE', e)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-15 14:07:31 \r\n     * @Desc: window的点击事件 \r\n     */\r\n    onWindowClick(e) {\r\n        this.emit('WINDOW-CLICK', e)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 15:56:54 \r\n     * @Desc: 清除画布 \r\n     */\r\n    clearCanvas() {\r\n        this.ctx.clearRect(0, 0, this.canvasEle.width, this.canvasEle.height)\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-09-27 16:57:03 \r\n     * @Desc: 鼠标坐标转为相对canvas的坐标 \r\n     */\r\n    toCanvasPos(e) {\r\n        let cx = e.clientX\r\n        let cy = e.clientY\r\n        let {\r\n            left,\r\n            top\r\n        } = this.canvasEle.getBoundingClientRect()\r\n        let x = cx - left\r\n        let y = cy - top\r\n        return {\r\n            x,\r\n            y\r\n        }\r\n    }\r\n}\r\n\r\nMarkjs.use(editPlugin)\r\n\r\nexport default Markjs","export default function EditPlugin(instance, utils) {\r\n  let _resolve = null;\r\n  let promise = new Promise((resolve) => {\r\n    _resolve = resolve;\r\n  });\r\n  let scale = 1;\r\n  let draging = false;\r\n  let origX = 0;\r\n  let origY = 0;\r\n  let startX = 0;\r\n  let startY = 0;\r\n  let dragX = 0;\r\n  let dragY = 0;\r\n  let transition = \"\";\r\n  let scaleStep = instance.opt.mobile ? 0.05 : 0.1;\r\n  let maxScale = 10;\r\n\r\n  // 重写toCanvasPos方法\r\n  let originToCanvasPos = instance.toCanvasPos.bind(instance);\r\n  instance.toCanvasPos = (e) => {\r\n    let res = originToCanvasPos(e);\r\n    return {\r\n      x: res.x / scale,\r\n      y: res.y / scale,\r\n    };\r\n  };\r\n\r\n  // 鼠标滚动事件\r\n  instance.el.addEventListener(\"wheel\", (e) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (e.deltaY > 0) {\r\n      // 缩小\r\n      zoomOut();\r\n    } else {\r\n      // 放大\r\n      zoomIn();\r\n    }\r\n  });\r\n\r\n  // 鼠标触摸事件\r\n  let touchDistance = null;\r\n  instance.on(\"MOUSEMOVE\", (e, mobileEvent) => {\r\n    if (!mobileEvent) {\r\n      return;\r\n    }\r\n    if (mobileEvent.touches.length !== 2) {\r\n      return;\r\n    }\r\n    let p1 = mobileEvent.touches[0];\r\n    let p2 = mobileEvent.touches[1];\r\n    let distance = utils.getTwoPointDistance(\r\n      p1.clientX,\r\n      p1.clientY,\r\n      p2.clientX,\r\n      p2.clientY\r\n    );\r\n    if (touchDistance === null) {\r\n      touchDistance = distance;\r\n      return;\r\n    }\r\n    if (distance > touchDistance) {\r\n      // 放大\r\n      zoomIn();\r\n    } else {\r\n      // 缩小\r\n      zoomOut();\r\n    }\r\n    touchDistance = distance;\r\n  });\r\n\r\n  // 鼠标按下事件\r\n  instance.on(\"MOUSEDOWN\", (e) => {\r\n    if (scale === 1) {\r\n      return false;\r\n    }\r\n    origX = dragX;\r\n    origY = dragY;\r\n    startX = e.clientX;\r\n    startY = e.clientY;\r\n    draging = true;\r\n    transition = \"\";\r\n    setTransition();\r\n  });\r\n\r\n  // 鼠标移动事件\r\n  instance.on(\"MOUSEMOVE\", (e) => {\r\n    if (\r\n      instance.getState().curEditingMarkItem &&\r\n      instance.getState().curEditingMarkItem.isDragging\r\n    ) {\r\n      return;\r\n    }\r\n    if (!draging) {\r\n      return false;\r\n    }\r\n    let cx = e.clientX;\r\n    let cy = e.clientY;\r\n    let ox = cx - startX;\r\n    let oy = cy - startY;\r\n    dragX = origX + ox / scale;\r\n    dragY = origY + oy / scale;\r\n    setTransform();\r\n  });\r\n\r\n  // 鼠标松开事件\r\n  instance.on(\"MOUSEUP\", (e) => {\r\n    draging = false;\r\n    transition = \"all 0.3s\";\r\n    setTransition();\r\n    origX = 0;\r\n    origY = 0;\r\n  });\r\n\r\n  // 设置变换\r\n  const setTransform = () => {\r\n    instance.el.style.transform = `scale(${scale}) translate(${dragX}px,${dragY}px)`;\r\n  };\r\n\r\n  // 设置过渡\r\n  const setTransition = () => {\r\n    instance.el.style.transition = transition;\r\n  };\r\n\r\n  // 放大\r\n  const zoomIn = () => {\r\n    if (scale < maxScale) {\r\n      scale += scaleStep;\r\n    } else {\r\n      scale = maxScale;\r\n    }\r\n    setTransform();\r\n  };\r\n\r\n  // 缩小\r\n  const zoomOut = () => {\r\n    if (scale > 1) {\r\n      scale -= scaleStep;\r\n    } else {\r\n      reset();\r\n    }\r\n    setTransform();\r\n  };\r\n\r\n  // 复位\r\n  const reset = () => {\r\n    scale = 1;\r\n    draging = false;\r\n    transition = \"all 0.3s\";\r\n    setTransition();\r\n    startX = 0;\r\n    startY = 0;\r\n    dragX = 0;\r\n    dragY = 0;\r\n    setTransform();\r\n  };\r\n\r\n  _resolve();\r\n  return promise;\r\n}\r\n","import { render } from \"./Demo1.vue?vue&type=template&id=54060e40&scoped=true\"\nimport script from \"./Demo1.vue?vue&type=script&lang=js\"\nexport * from \"./Demo1.vue?vue&type=script&lang=js\"\n\nimport \"./Demo1.vue?vue&type=style&index=0&id=54060e40&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-54060e40\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo2\" id=\"demo2\">\r\n      <a href=\"#demo2\">基础用法</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox1\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"create1\"\r\n      :disabled=\"!editing1 || !!curEditMarkItem1\"\r\n      >新增标注</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit1\" :disabled=\"!isCreateMarking1\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData1\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem1\"\r\n      :disabled=\"!curEditMarkItem1\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll1\"\r\n      >删除全部</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\n\r\nlet mark1 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 基础用法\r\n      editing1: true,\r\n      curEditMarkItem1: null,\r\n      isCreateMarking1: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 基础用法\r\n      mark1 = new Markjs({\r\n        el: this.$refs.markBox1,\r\n        hoverActive: true,\r\n      });\r\n      mark1.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem1 = item;\r\n      });\r\n      mark1.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking1 = state;\r\n      });\r\n      mark1.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    // 基础用法\r\n    getMarkData1() {\r\n      console.log(mark1.getMarkData(), JSON.stringify(mark1.getMarkData()));\r\n    },\r\n    deleteItem1() {\r\n      mark1.deleteMarkItem(this.curEditMarkItem1);\r\n    },\r\n    deleteAll1() {\r\n      mark1.deleteAllMarkItem();\r\n    },\r\n    create1() {\r\n      mark1.createMarkItem();\r\n    },\r\n    exit1() {\r\n      mark1.exitCreate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import { render } from \"./Demo2.vue?vue&type=template&id=309cb156&scoped=true\"\nimport script from \"./Demo2.vue?vue&type=script&lang=js\"\nexport * from \"./Demo2.vue?vue&type=script&lang=js\"\n\nimport \"./Demo2.vue?vue&type=style&index=0&id=309cb156&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-309cb156\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo3\" id=\"demo3\">\r\n      <a href=\"#demo3\">标注图片</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox2\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"create2\"\r\n      :disabled=\"!editing2 || !!curEditMarkItem2\"\r\n      >新增标注</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit2\" :disabled=\"!isCreateMarking2\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData2\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem2\"\r\n      :disabled=\"!curEditMarkItem2\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll2\"\r\n      >删除全部</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport imgPlugin from \"@wanglin1994/markjs/src/plugins/img\";\r\nMarkjs.use(imgPlugin, 0);\r\n\r\nlet mark2 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 标注图片\r\n      editing2: true,\r\n      curEditMarkItem2: null,\r\n      isCreateMarking2: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 标注图片\r\n      mark2 = new Markjs({\r\n        el: this.$refs.markBox2,\r\n        hoverActive: true,\r\n        img: require(\"../assets/demo.png\"),\r\n        elBg: \"#000\",\r\n        max: 3,\r\n        noCrossing: true,\r\n      });\r\n      mark2.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem2 = item;\r\n      });\r\n      mark2.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking2 = state;\r\n      });\r\n      mark2.on(\"LINE-CROSS\", (item) => {\r\n        this.$message.warning(\"线段不允许交叉\");\r\n      });\r\n      mark2.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n      mark2.on(\"COUNT-LIMIT\", (state) => {\r\n        this.$message.warning(\"最多只能绘制三个区域\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    // 标注图片\r\n    getMarkData2() {\r\n      console.log(mark2.getMarkData(), JSON.stringify(mark2.getMarkData()));\r\n    },\r\n    deleteItem2() {\r\n      mark2.deleteMarkItem(this.curEditMarkItem2);\r\n    },\r\n    deleteAll2() {\r\n      mark2.deleteAllMarkItem();\r\n    },\r\n    create2() {\r\n      mark2.createMarkItem();\r\n    },\r\n    exit2() {\r\n      mark2.exitCreate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import utils from '../utils'\r\n\r\n/*\r\n配置\r\n{\r\n    img: '',// 图片，必填\r\n    elBg: '',// 容器的背景颜色\r\n    bg: ''// 画布的背景颜色\r\n}\r\n\r\n属性\r\n\r\n事件\r\n\r\n方法\r\n*/\r\n\r\n// 默认配置\r\nconst defaultOpt = {\r\n    elBg: '',\r\n    bg: ''\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-22 10:29:50 \r\n * @Desc: 图片支持插件 \r\n * 根据图片自动缩放调整最终画布大小\r\n * 该插件需要安装到Edit插件之前，Markjs.use(imgPlugin, 0)\r\n */\r\nexport default function ImgPlugin(instance) {\r\n    let _resolve = null\r\n    let promise = new Promise((resolve) => {\r\n        _resolve = resolve\r\n    })\r\n    let opt = {\r\n        ...defaultOpt,\r\n        ...instance.opt\r\n    }\r\n    if (!opt.img) {\r\n        _resolve()\r\n        return promise\r\n    }\r\n    // 容器尺寸信息\r\n    let elRectInfo = instance.elRectInfo\r\n    // 画布元素\r\n    let canvasEle = instance.canvasEle\r\n    // 图片要素canvas\r\n    let imgCanvasEle = null\r\n    // 图片对象\r\n    let image = null\r\n    // 图片实际宽高\r\n    let imgActWidth = 0\r\n    let imgActHeight = 0\r\n    // 最终画布区域宽高\r\n    let actEditWidth = 0\r\n    let actEditHeight = 0\r\n    // 最终渲染宽高与图片实际宽高的比例\r\n    let ratio = 0\r\n    // 是否是刷新图片\r\n    let isRefreshImage = false\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-11-03 15:33:39 \r\n     * @Desc: 销毁 \r\n     */\r\n    instance.on('DESTORY', () => {\r\n        imgCanvasEle && instance.el.removeChild(imgCanvasEle)\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 14:33:06 \r\n     * @Desc: 加载图片 \r\n     */\r\n    function loadImage () {\r\n        utils.loadImage(opt.img)\r\n            .then((img) => {\r\n                image = img\r\n                imgActWidth = image.width\r\n                imgActHeight = image.height\r\n                init()\r\n                if (!isRefreshImage) {\r\n                    _resolve()\r\n                }\r\n            })\r\n            .catch((e) => {\r\n                instance.observer.publish('IMG-LOAD-ERROR', e)\r\n                if (!isRefreshImage) {\r\n                    _resolve()\r\n                }\r\n            })\r\n    }\r\n\r\n    loadImage()\r\n    \r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2021-11-09 11:11:23 \r\n     * @Desc: 刷新图片 \r\n     */\r\n    function refreshImage (img) {\r\n        if (!img) {\r\n            return\r\n        }\r\n        isRefreshImage = true\r\n        instance.opt.img = img\r\n        opt.img = img\r\n        loadImage()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 11:01:59 \r\n     * @Desc: 初始化 \r\n     */\r\n    function init () {\r\n        setSize()\r\n        instance.canvasEleRectInfo = {\r\n            width: actEditWidth,\r\n            height: actEditHeight,\r\n            left: (elRectInfo.width - actEditWidth) / 2,\r\n            top: (elRectInfo.height - actEditHeight) / 2\r\n        }\r\n        setElStyle()\r\n        setCanvasStyle(canvasEle, {\r\n            zIndex: 2\r\n        })\r\n        drawImg()\r\n        if (isRefreshImage) {\r\n            instance._render()\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 14:19:51 \r\n     * @Desc: 计算缩放后的实际尺寸 \r\n     */\r\n    function setSize () {\r\n        // 容器宽高都大于图片实际宽高，不需要缩放\r\n        if (elRectInfo.width >= imgActWidth && elRectInfo.height >= imgActHeight) {\r\n            ratio = 1\r\n            actEditWidth = imgActWidth\r\n            actEditHeight =imgActHeight\r\n        } else {// 容器宽高有一个小于图片实际宽高，需要缩放\r\n            let imgActRatio = imgActWidth / imgActHeight\r\n            let elRatio = elRectInfo.width / elRectInfo.height\r\n            if (elRatio > imgActRatio) {\r\n                // 高度定死，宽度自适应\r\n                ratio = imgActHeight / elRectInfo.height\r\n                actEditWidth = imgActWidth / ratio\r\n                actEditHeight = elRectInfo.height\r\n            } else {\r\n                // 宽度定死，高度自适应\r\n                ratio = imgActWidth / elRectInfo.width\r\n                actEditWidth = elRectInfo.width\r\n                actEditHeight = imgActHeight / ratio\r\n            }\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 14:21:56 \r\n     * @Desc: 设置容器元素的样式 \r\n     */\r\n    function setElStyle() {\r\n        let elPosition = window.getComputedStyle(instance.el).position\r\n        if (elPosition === 'static') {\r\n            instance.el.style.position = 'relative'\r\n        }\r\n        if (opt.elBg) {\r\n            instance.originEl.style.background = opt.elBg\r\n            instance.el.style.background = opt.elBg\r\n        }\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 14:22:28 \r\n     * @Desc: 设置画布元素的样式 \r\n     */\r\n    function setCanvasStyle(canvas, style = {}) {\r\n        canvas.width = actEditWidth\r\n        canvas.height = actEditHeight\r\n        canvas.style.position = 'absolute'\r\n        canvas.style.left = instance.canvasEleRectInfo.left + 'px'\r\n        canvas.style.top = instance.canvasEleRectInfo.top + 'px'\r\n        Object.keys(style).forEach((item) => {\r\n            canvas.style[item] = style[item]\r\n        })\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 14:25:21 \r\n     * @Desc: 绘制图片 \r\n     */\r\n    function drawImg () {\r\n        imgCanvasEle = imgCanvasEle || document.createElement('canvas')\r\n        let style = {\r\n            zIndex: 1\r\n        }\r\n        if (opt.bg) {\r\n            style.background = opt.bg\r\n        }\r\n        setCanvasStyle(imgCanvasEle, style)\r\n        instance.el.appendChild(imgCanvasEle)\r\n        let ctx = imgCanvasEle.getContext('2d')\r\n        ctx.drawImage(image, 0, 0, actEditWidth, actEditHeight)\r\n    }\r\n\r\n    instance.image = image\r\n    instance.ratio = ratio\r\n    instance.refreshImage = refreshImage\r\n\r\n    return promise\r\n}","import { render } from \"./Demo3.vue?vue&type=template&id=6f7eab21&scoped=true\"\nimport script from \"./Demo3.vue?vue&type=script&lang=js\"\nexport * from \"./Demo3.vue?vue&type=script&lang=js\"\n\nimport \"./Demo3.vue?vue&type=style&index=0&id=6f7eab21&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f7eab21\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\" ref=\"container\">\r\n    <h1 name=\"demo4\" id=\"demo4\">\r\n      <a href=\"#demo4\">特定形状</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox3\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"createShape3\"\r\n      :disabled=\"!editing3 || !!curEditMarkItem3\"\r\n      >创建形状</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit3\" :disabled=\"!isCreateMarking3\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData3\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem3\"\r\n      :disabled=\"!curEditMarkItem3\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll3\"\r\n      >删除全部</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport shapePlugin from \"@wanglin1994/markjs/src/plugins/shape\";\r\nMarkjs.use(shapePlugin);\r\n\r\nlet mark3 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 特定形状\r\n      editing3: true,\r\n      curEditMarkItem3: null,\r\n      isCreateMarking3: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 特定形状\r\n      mark3 = new Markjs({\r\n        el: this.$refs.markBox3,\r\n        hoverActive: true,\r\n      });\r\n      mark3.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem3 = item;\r\n      });\r\n      mark3.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking3 = state;\r\n      });\r\n      mark3.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    // 特定形状\r\n    getMarkData3() {\r\n      console.log(mark3.getMarkData(), JSON.stringify(mark3.getMarkData()));\r\n    },\r\n    deleteItem3() {\r\n      mark3.deleteMarkItem(this.curEditMarkItem);\r\n    },\r\n    deleteAll3() {\r\n      mark3.deleteAllMarkItem();\r\n    },\r\n    exit3() {\r\n      mark3.exitCreate();\r\n    },\r\n    createShape3() {\r\n      mark3.createShapeMarkItem(\"rectangle\", {\r\n        fillColor: \"rgba(250,50,57,0.30)\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","const defaultOpt = {\r\n    shape: {\r\n        // 正方形\r\n        square: {\r\n            create({\r\n                width,\r\n                height\r\n            }) {\r\n                let _width\r\n                if (width > height) {\r\n                    _width = height * 0.5\r\n                } else {\r\n                    _width = width * 0.5\r\n                }\r\n                let hw = (width - _width) / 2\r\n                let hh = (height - _width) / 2\r\n                return [{\r\n                        x: hw,\r\n                        y: hh\r\n                    },\r\n                    {\r\n                        x: hw + _width,\r\n                        y: hh\r\n                    },\r\n                    {\r\n                        x: hw + _width,\r\n                        y: hh + _width\r\n                    },\r\n                    {\r\n                        x: hw,\r\n                        y: hh + _width\r\n                    }\r\n                ]\r\n            },\r\n            update(instance, x, y) {\r\n                let fixIndex = (instance.dragPointIndex + 2) % 4\r\n                let fixPoint = instance.pointArr[fixIndex]\r\n                let width = Math.max(Math.abs(x - fixPoint.x), Math.abs(y - fixPoint.y))\r\n                let newX = (x > fixPoint.x ? fixPoint.x + width : fixPoint.x - width)\r\n                let newY = (y > fixPoint.y ? fixPoint.y + width : fixPoint.y - width)\r\n                let even = instance.dragPointIndex % 2 === 0\r\n                instance.pointArr[fixIndex] = {\r\n                    x: fixPoint.x,\r\n                    y: fixPoint.y\r\n                }\r\n                instance.pointArr[instance.dragPointIndex] = {\r\n                    x: newX,\r\n                    y: newY\r\n                }\r\n                instance.pointArr[(instance.dragPointIndex + 1) % 4] = {\r\n                    x: even ? newX : fixPoint.x,\r\n                    y: even ? fixPoint.y : newY\r\n                }\r\n                instance.pointArr[(instance.dragPointIndex + 3) % 4] = {\r\n                    x: even ? fixPoint.x : newX,\r\n                    y: even ? newY : fixPoint.y\r\n                }\r\n            }\r\n        },\r\n        // 矩形\r\n        rectangle: {\r\n            create({\r\n                width,\r\n                height\r\n            }) {\r\n                let _width\r\n                if (width > height) {\r\n                    _width = height * 0.5\r\n                } else {\r\n                    _width = width * 0.5\r\n                }\r\n                let hw = (width - _width) / 2\r\n                let hh = (height - _width) / 2\r\n                return [{\r\n                        x: hw,\r\n                        y: hh\r\n                    },\r\n                    {\r\n                        x: hw + _width,\r\n                        y: hh\r\n                    },\r\n                    {\r\n                        x: hw + _width,\r\n                        y: hh + _width\r\n                    },\r\n                    {\r\n                        x: hw,\r\n                        y: hh + _width\r\n                    }\r\n                ]\r\n            },\r\n            update(instance, x, y) {\r\n                let xChangePoint = -1\r\n                let yChangePoint = -1\r\n                switch (instance.dragPointIndex) {\r\n                    case 0:\r\n                        xChangePoint = 3\r\n                        yChangePoint = 1\r\n                        break;\r\n                    case 1:\r\n                        xChangePoint = 2\r\n                        yChangePoint = 0\r\n                        break;\r\n                    case 2:\r\n                        xChangePoint = 1\r\n                        yChangePoint = 3\r\n                        break;\r\n                    case 3:\r\n                        xChangePoint = 0\r\n                        yChangePoint = 2\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                instance.pointArr[instance.dragPointIndex] = {\r\n                    x,\r\n                    y\r\n                }\r\n                instance.pointArr[xChangePoint].x = x\r\n                instance.pointArr[yChangePoint].y = y\r\n            }\r\n        }\r\n    },\r\n    max: -1\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-22 15:51:08 \r\n * @Desc: 形状插件 \r\n * 回显的数据里需要添加shape属性，否则不会保持特定形状\r\n */\r\nexport default function ShapePlugin(instance) {\r\n    let _resolve = null\r\n    let promise = new Promise((resolve) => {\r\n        _resolve = resolve\r\n    })\r\n    let opt = {\r\n        ...defaultOpt,\r\n        ...instance.opt,\r\n        shape: {\r\n            ...defaultOpt.shape,\r\n            ...instance.opt.shape\r\n        }\r\n    }\r\n    let {\r\n        _disableAllItemsEdit: disableAllItemsEdit,\r\n        _setMarkEditItem: setMarkEditItem,\r\n        _createNewMarkItem: createNewMarkItem,\r\n        _setIsCreateMarking: setIsCreateMarking,\r\n        _render: render\r\n    } = instance\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-23 14:23:34 \r\n     * @Desc: 遍历标注是否存在特定形状，有的话添加更新方法 \r\n     */\r\n    function addUpdate() {\r\n        let {\r\n            markItemList\r\n        } = instance.getState()\r\n        markItemList.forEach((item) => {\r\n            if (item.opt.shape && opt.shape[item.opt.shape]) {\r\n                item.updatePointFn = opt.shape[item.opt.shape].update\r\n            }\r\n        })\r\n    }\r\n    addUpdate()\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-22 16:37:36 \r\n     * @Desc: 创建指定形状 \r\n     */\r\n    function createShapeMarkItem(shape, _opt = {}) {\r\n        let _shape = opt.shape[shape]\r\n        if (!_shape) {\r\n            return\r\n        }\r\n        let {\r\n            markItemList\r\n        } = instance.getState()\r\n        // 数量判断\r\n        if (opt.max === -1 || markItemList.length < opt.max) {\r\n            disableAllItemsEdit()\r\n            setMarkEditItem(createNewMarkItem({\r\n                pointArr: _shape.create(instance.canvasEleRectInfo),\r\n                updatePoint: _shape.update,\r\n                ..._opt\r\n            }))\r\n            instance.getState().curEditingMarkItem.closePath()\r\n            instance.getState().curEditingMarkItem.enable()\r\n            markItemList.push(instance.getState().curEditingMarkItem)\r\n            setIsCreateMarking(false)\r\n            instance.emit('COMPLETE-EDIT-ITEM', instance.getState().curEditingMarkItem)\r\n        } else { // 超出数量限制\r\n            instance.observer.publish('COUNT-LIMIT', instance.getState().curEditingMarkItem)\r\n            setIsCreateMarking(false)\r\n        }\r\n        render()\r\n    }\r\n\r\n    instance.createShapeMarkItem = createShapeMarkItem\r\n\r\n    _resolve()\r\n    return promise\r\n}","import { render } from \"./Demo4.vue?vue&type=template&id=5a1e1e2b&scoped=true\"\nimport script from \"./Demo4.vue?vue&type=script&lang=js\"\nexport * from \"./Demo4.vue?vue&type=script&lang=js\"\n\nimport \"./Demo4.vue?vue&type=style&index=0&id=5a1e1e2b&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5a1e1e2b\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo5\" id=\"demo5\">\r\n      <a href=\"#demo5\">单独编辑</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox4\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"create4\"\r\n      :disabled=\"!editing4 || !!curEditMarkItem4\"\r\n      >新增标注</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit4\" :disabled=\"!isCreateMarking4\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData4\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem4\"\r\n      :disabled=\"!curEditMarkItem4\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll4\"\r\n      >删除全部</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport mousePlugin from \"@wanglin1994/markjs/src/plugins/mouse\";\r\nMarkjs.use(mousePlugin);\r\n\r\nlet mark4 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 单独编辑\r\n      editing4: true,\r\n      curEditMarkItem4: null,\r\n      isCreateMarking4: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 单独编辑\r\n      mark4 = new Markjs({\r\n        el: this.$refs.markBox4,\r\n        hoverActive: true,\r\n        single: true,\r\n      });\r\n      mark4.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem4 = item;\r\n      });\r\n      mark4.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking4 = state;\r\n      });\r\n      mark4.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    getMarkData4() {\r\n      console.log(mark4.getMarkData(), JSON.stringify(mark4.getMarkData()));\r\n    },\r\n    deleteItem4() {\r\n      mark4.deleteMarkItem(this.curEditMarkItem4);\r\n    },\r\n    deleteAll4() {\r\n      mark4.deleteAllMarkItem();\r\n    },\r\n    create4() {\r\n      mark4.createMarkItem();\r\n    },\r\n    exit4() {\r\n      mark4.exitCreate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","/*\r\n配置\r\n{\r\n    cursorTips: {// 提示信息\r\n        START: '单击进行绘制，双击结束操作',\r\n        EDITING: '拖曳移动节点或区域，双击结束操作',\r\n        HOVER: '单击激活该区域并进入编辑状态',\r\n        EDITING_POINT: '拖拽移动节点，修改区域边界，双击删除节点'\r\n    },\r\n    showPen: true,// 是否显示笔\r\n    penImg: ''// 鼠标指针图片\r\n}\r\n\r\n属性\r\n\r\n事件\r\n\r\n方法\r\n*/\r\n\r\n// 默认配置\r\nconst defaultOpt = {\r\n    showPen: true,\r\n    penImg: require('../assets/pen.png'),\r\n    cursorTips: {\r\n        START: '单击进行绘制，双击结束操作',\r\n        EDITING: '拖曳移动节点或区域，双击结束操作',\r\n        HOVER: '单击激活该区域并进入编辑状态',\r\n        EDITING_POINT: '拖拽移动节点，修改区域边界，双击删除节点'\r\n    }\r\n}\r\n\r\n/** \r\n * javascript comment \r\n * @Author: 王林25 \r\n * @Date: 2020-10-16 11:16:20 \r\n * @Desc: 鼠标样式插件 \r\n */\r\nexport default function mousePlugin(instance){\r\n    let _resolve = null\r\n    let promise = new Promise((resolve) => {\r\n        _resolve = resolve\r\n    })\r\n    let opt = {\r\n        ...defaultOpt,\r\n        ...instance.opt\r\n    }\r\n    let canvasEle = instance.canvasEle\r\n    let cursorTipEle = null\r\n    let tips = {\r\n        ...defaultOpt.cursorTips,\r\n        ...opt.cursorTips\r\n    }\r\n    let isHoverInItem = false\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:37:52 \r\n     * @Desc: 创建元素 \r\n     */\r\n    function createEle() {\r\n        cursorTipEle = document.createElement('div')\r\n        cursorTipEle.style.cssText = `\r\n            position: fixed;\r\n            height: 20px;\r\n            background-color: #fff;\r\n            color: #000;\r\n            line-height: 20px;\r\n            font-size: 12px;\r\n            padding: 0 10px;\r\n            user-select: none;\r\n            display: none;\r\n            z-index: 3;\r\n        `\r\n        document.body.appendChild(cursorTipEle)\r\n    }\r\n    createEle()\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:40:59 \r\n     * @Desc: 显示元素 \r\n     */\r\n    function showEle() {\r\n        cursorTipEle.style.display = 'block'\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:41:11 \r\n     * @Desc: 隐藏元素 \r\n     */\r\n    function hideEle() {\r\n        cursorTipEle.style.display = 'none'\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:59:59 \r\n     * @Desc: 显示画笔 \r\n     */\r\n    function showPen() {\r\n        if (!opt.showPen) {\r\n            return\r\n        }\r\n        canvasEle.style.cursor = `url('${opt.penImg}') ,default`\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 14:01:26 \r\n     * @Desc: 隐藏画笔 \r\n     */\r\n    function hidePen() {\r\n        canvasEle.style.cursor = 'default'\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:38:39 \r\n     * @Desc: 设置元素位置 \r\n     */\r\n    function setElePos(left, top) {\r\n        cursorTipEle.style.left = left + 'px'\r\n        cursorTipEle.style.top = top + 'px'\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:40:26 \r\n     * @Desc: 设置元素内容 \r\n     */\r\n    function setEleText(text = '') {\r\n        cursorTipEle.innerHTML = text\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 14:04:35 \r\n     * @Desc: 隐藏全部 \r\n     */\r\n    function hideAll () {\r\n        hidePen()\r\n        hideEle()\r\n        setElePos(0, 0)\r\n        setEleText()\r\n    }\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 11:27:29 \r\n     * @Desc: 鼠标移入事件 \r\n     */\r\n    instance.on('MOUSEMOVE', (e) => {\r\n        if (isHoverInItem) {\r\n            hidePen()\r\n        } else {\r\n            hideAll()\r\n            if (instance.getState().isCreateMarking) {\r\n                showPen()\r\n                setElePos(e.clientX + 30, e.clientY)\r\n                setEleText(tips.START)\r\n                showEle()\r\n            }\r\n        }\r\n        isHoverInItem = false\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:44:47 \r\n     * @Desc: 鼠标移出事件 \r\n     */\r\n    instance.on('MOUSELEAVE', (e) => {\r\n        hideAll()\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 13:50:30 \r\n     * @Desc: 鼠标移到某个区域内 \r\n     */\r\n    instance.on('HOVER-ITEM', (item, curItem, allInItems, e, inPointIndex) => {\r\n        if (!curItem || curItem.isClosePath) {\r\n            isHoverInItem = true\r\n            setElePos(e.clientX + 30, e.clientY)\r\n            if (instance.opt.single) {\r\n                if (curItem && allInItems.includes(curItem)) {\r\n                    if (opt.dbClickRemovePoint && inPointIndex !== -1) {\r\n                        setEleText(tips.EDITING_POINT)\r\n                    } else {\r\n                        setEleText(tips.EDITING)\r\n                    }\r\n                    showEle()\r\n                } else {\r\n                    if (!curItem) {\r\n                        setEleText(tips.HOVER)\r\n                        showEle()\r\n                    } else {\r\n                        setEleText()\r\n                        hideEle()\r\n                    }\r\n                }\r\n            } else {\r\n                if (curItem && allInItems.includes(curItem)) {\r\n                    if (opt.dbClickRemovePoint && inPointIndex !== -1) {\r\n                        setEleText(tips.EDITING_POINT)\r\n                    } else {\r\n                        setEleText(tips.EDITING)\r\n                    }\r\n                    showEle()\r\n                } else {\r\n                    if (item.isEditing) {\r\n                        setEleText(tips.EDITING)\r\n                        showEle()\r\n                    } else {\r\n                        setEleText(tips.HOVER)\r\n                        showEle()\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n\r\n    /** \r\n     * javascript comment \r\n     * @Author: 王林25 \r\n     * @Date: 2020-10-16 14:04:05 \r\n     * @Desc: 完成某个区域绘制 \r\n     */\r\n    instance.on('COMPLETE-EDIT-ITEM', () => {\r\n        hideAll()\r\n    })\r\n\r\n    _resolve()\r\n    return promise\r\n}","import { render } from \"./Demo5.vue?vue&type=template&id=4fee0810&scoped=true\"\nimport script from \"./Demo5.vue?vue&type=script&lang=js\"\nexport * from \"./Demo5.vue?vue&type=script&lang=js\"\n\nimport \"./Demo5.vue?vue&type=style&index=0&id=4fee0810&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4fee0810\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\" ref=\"container\">\r\n    <h1 name=\"demo6\" id=\"demo6\">\r\n      <a href=\"#demo6\">综合示例</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox5\"></div>\r\n    <el-button type=\"primary\" @click=\"edit5\">{{\r\n      editing5 ? \"切换到只读模式\" : \"切换到编辑模式\"\r\n    }}</el-button>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"create5\"\r\n      :disabled=\"!editing5 || !!curEditMarkItem5\"\r\n      >新增标注</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"createShape5\"\r\n      :disabled=\"!editing5 || !!curEditMarkItem5\"\r\n      >创建形状</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit5\" :disabled=\"!isCreateMarking5\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData5\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem5\"\r\n      :disabled=\"!curEditMarkItem5\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll5\"\r\n      >删除全部</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport mousePlugin from \"@wanglin1994/markjs/src/plugins/mouse\";\r\nimport imgPlugin from \"@wanglin1994/markjs/src/plugins/img\";\r\nimport shapePlugin from \"@wanglin1994/markjs/src/plugins/shape\";\r\nMarkjs.use(imgPlugin, 0);\r\nMarkjs.use(shapePlugin);\r\nMarkjs.use(mousePlugin);\r\n\r\nlet mark5 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 综合示例\r\n      editing5: false,\r\n      curEditMarkItem5: null,\r\n      isCreateMarking5: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      mark5 = new Markjs({\r\n        el: this.$refs.markBox5,\r\n        value: [\r\n          {\r\n            data: \"区域1\",\r\n            pointArr: [\r\n              { x: 0.5409663865546218, y: 0.16607004643962847 },\r\n              { x: 1.009453781512605, y: 0.19393382352941177 },\r\n              { x: 0.8960084033613446, y: 0.6273703560371517 },\r\n              { x: 0.6039915966386554, y: 0.8502805727554179 },\r\n              { x: 0.39810924369747897, y: 0.5097232972136223 },\r\n              { x: 0.5577731092436975, y: 0.4137480650154799 },\r\n            ],\r\n            fillColor: \"rgba(250,50,57,0.30)\",\r\n            strokeStyle: { strokeColor: \"red\" },\r\n            pointStyle: { fillColor: \"#FFCC00\", strokeColor: \"#FFCC00\" },\r\n          },\r\n          {\r\n            data: null,\r\n            pointArr: [\r\n              { x: 0.0703781512605042, y: 0.15368614551083593 },\r\n              { x: 0.23004201680672268, y: 0.04842298761609907 },\r\n              { x: 0.13970588235294118, y: 0.28062113003095973 },\r\n              { x: 0.21533613445378152, y: 0.4508997678018576 },\r\n              { x: 0.19432773109243698, y: 0.655234133126935 },\r\n              { x: 0.27836134453781514, y: 0.8007449690402477 },\r\n              { x: 0.1796218487394958, y: 0.806936919504644 },\r\n              { x: 0.11659663865546219, y: 0.8595684984520123 },\r\n            ],\r\n          },\r\n          {\r\n            data: null,\r\n            shape: \"square\",\r\n            pointArr: [\r\n              { x: 0.37, y: 0.2025 },\r\n              { x: 0.7033333333333334, y: 0.2025 },\r\n              { x: 0.7033333333333334, y: 0.7025 },\r\n              { x: 0.37, y: 0.7025 },\r\n            ],\r\n            fillColor: \"rgba(255,223,66,0.80)\",\r\n            strokeStyle: { strokeColor: \"#FFCC00\" },\r\n          },\r\n        ],\r\n        showPoint: true,\r\n        pointType: \"square\",\r\n        pointWidth: 3,\r\n        pointStyle: {\r\n          lineWidth: 3,\r\n          strokeColor: \"#fff\",\r\n          fillColor: \"#fff\",\r\n        },\r\n        max: 5,\r\n        hoverActive: true,\r\n        readonly: true,\r\n        showPen: true,\r\n        single: false,\r\n        noCrossing: true,\r\n        img: require(\"../assets/demo.png\"),\r\n        elBg: \"#000\",\r\n        bg: \"#fff\",\r\n      });\r\n      mark5.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem5 = item;\r\n      });\r\n      mark5.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking5 = state;\r\n      });\r\n      mark5.on(\"LINE-CROSS\", (item) => {\r\n        this.$message.warning(\"线段不允许交叉\");\r\n      });\r\n      mark5.on(\"NOT-ENOUGH-END-POINTS\", (item) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n      mark5.on(\"COUNT-LIMIT\", (item) => {\r\n        this.$message.warning(\"最多只能绘制三个区域\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    edit5() {\r\n      if (this.editing5) {\r\n        let succ = mark5.disableEdit();\r\n        if (!succ) {\r\n          this.$message.warning(\"请先完成编辑\");\r\n          return;\r\n        }\r\n      } else {\r\n        mark5.enableEdit();\r\n      }\r\n      this.editing5 = !this.editing5;\r\n    },\r\n    getMarkData5() {\r\n      console.log(mark5.getMarkData(), JSON.stringify(mark5.getMarkData()));\r\n    },\r\n    deleteItem5() {\r\n      mark.deleteMarkItem(this.curEditMarkItem5);\r\n    },\r\n    deleteAll5() {\r\n      mark5.deleteAllMarkItem();\r\n    },\r\n    create5() {\r\n      mark5.createMarkItem({\r\n        data: \"新标注\",\r\n        fillColor: \"rgba(155,224,255,0.27)\",\r\n      });\r\n    },\r\n    exit5() {\r\n      mark5.exitCreate();\r\n    },\r\n    createShape5() {\r\n      mark5.createShapeMarkItem(\"square\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import { render } from \"./Demo6.vue?vue&type=template&id=ce92a108&scoped=true\"\nimport script from \"./Demo6.vue?vue&type=script&lang=js\"\nexport * from \"./Demo6.vue?vue&type=script&lang=js\"\n\nimport \"./Demo6.vue?vue&type=style&index=0&id=ce92a108&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ce92a108\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo3-2\" id=\"demo3-2\">\r\n      <a href=\"#demo3-2\">标注图片（可切换图片）</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox2\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"refresh\"\r\n      >刷新图片</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData2\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport imgPlugin from \"@wanglin1994/markjs/src/plugins/img\";\r\nimport shapePlugin from \"@wanglin1994/markjs/src/plugins/shape\";\r\nMarkjs.use(imgPlugin, 0);\r\nMarkjs.use(shapePlugin);\r\n\r\nconst imgList = [\r\n  require('../assets/demo2.jpg'),\r\n  require('../assets/demo3.jpg'),\r\n  require('../assets/demo4.jpg'),\r\n  require('../assets/demo5.png'),\r\n  require('../assets/demo6.png'),\r\n  require('../assets/demo.png'),\r\n]\r\n\r\nlet mark2 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 标注图片\r\n      editing2: true\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 标注图片\r\n      mark2 = new Markjs({\r\n        el: this.$refs.markBox2,\r\n        hoverActive: true,\r\n        img: imgList[0],\r\n        elBg: \"#000\",\r\n        max: 3,\r\n        noCrossing: true,\r\n      });\r\n      mark2.on('PLUGINS_LOADED', () => {\r\n        this.create2()\r\n      })\r\n    });\r\n  },\r\n  methods: {\r\n    // 标注图片\r\n    refresh() {\r\n      let index = Math.floor(Math.random() * imgList.length)\r\n      mark2.refreshImage(imgList[index])\r\n    },\r\n    getMarkData2() {\r\n      console.log(mark2.getMarkData(), JSON.stringify(mark2.getMarkData()));\r\n    },\r\n    create2() {\r\n      mark2.createShapeMarkItem(\"square\", {\r\n        fillColor: \"rgba(250,50,57,0.30)\",\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  width: 100%;\r\n\r\n  .markBox {\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: #f5f5f5;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>","import { render } from \"./Demo3-2.vue?vue&type=template&id=12a2712d&scoped=true\"\nimport script from \"./Demo3-2.vue?vue&type=script&lang=js\"\nexport * from \"./Demo3-2.vue?vue&type=script&lang=js\"\n\nimport \"./Demo3-2.vue?vue&type=style&index=0&id=12a2712d&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12a2712d\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <div class=\"markBox\" ref=\"markBox33\"></div>\r\n    <el-button\r\n      type=\"primary\"\r\n      @click=\"refresh\"\r\n      >刷新图片</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData2\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport imgPlugin from \"@wanglin1994/markjs/src/plugins/img\";\r\nimport shapePlugin from \"@wanglin1994/markjs/src/plugins/shape\";\r\nimport Vconsole from 'vconsole';\r\nMarkjs.use(imgPlugin, 0);\r\nMarkjs.use(shapePlugin);\r\nnew Vconsole();\r\n\r\nconst imgList = [\r\n  require('../assets/demo2.jpg'),\r\n  require('../assets/demo3.jpg'),\r\n  require('../assets/demo4.jpg'),\r\n  require('../assets/demo5.png'),\r\n  require('../assets/demo6.png'),\r\n  require('../assets/demo.png'),\r\n]\r\n\r\nlet mark2 = null;\r\n// 移动端测试\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 标注图片\r\n      editing2: true\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 标注图片\r\n      mark2 = new Markjs({\r\n        el: this.$refs.markBox33,\r\n        hoverActive: true,\r\n        img: imgList[0],\r\n        elBg: \"#000\",\r\n        max: 3,\r\n        noCrossing: true,\r\n        mobile: true\r\n      });\r\n      mark2.on('PLUGINS_LOADED', () => {\r\n        this.create2()\r\n      })\r\n    });\r\n  },\r\n  methods: {\r\n    // 标注图片\r\n    refresh() {\r\n      let index = Math.floor(Math.random() * imgList.length)\r\n      mark2.refreshImage(imgList[index])\r\n    },\r\n    getMarkData2() {\r\n      console.log(mark2.getMarkData(), JSON.stringify(mark2.getMarkData()));\r\n    },\r\n    create2() {\r\n      mark2.createShapeMarkItem(\"square\", {\r\n        fillColor: \"rgba(250,50,57,0.30)\",\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 999;\r\n  overflow: hidden;\r\n\r\n  .markBox {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #f5f5f5;\r\n  }\r\n}\r\n</style>","import { render } from \"./Demo3-3.vue?vue&type=template&id=b94f777c&scoped=true\"\nimport script from \"./Demo3-3.vue?vue&type=script&lang=js\"\nexport * from \"./Demo3-3.vue?vue&type=script&lang=js\"\n\nimport \"./Demo3-3.vue?vue&type=style&index=0&id=b94f777c&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b94f777c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"container\">\r\n    <h1 name=\"demo34\" id=\"demo34\">\r\n      <a href=\"#demo34\">标注图片（移动端）</a>\r\n    </h1>\r\n    <div class=\"markBox\" ref=\"markBox34\"></div>\r\n    <div class=\"btnGroup\">\r\n      <el-button\r\n      type=\"primary\"\r\n      @click=\"create2\"\r\n      :disabled=\"!editing2 || !!curEditMarkItem2\"\r\n      >新增标注</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"exit2\" :disabled=\"!isCreateMarking2\"\r\n      >退出新增</el-button\r\n    >\r\n    <el-button type=\"primary\" @click=\"getMarkData2\"\r\n      >获取标注（控制台查看）</el-button\r\n    >\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteItem2\"\r\n      :disabled=\"!curEditMarkItem2\"\r\n    ></el-button>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteAll2\"\r\n      >删除全部</el-button\r\n    >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Markjs from \"@wanglin1994/markjs\";\r\nimport imgPlugin from \"@wanglin1994/markjs/src/plugins/img\";\r\nMarkjs.use(imgPlugin, 0);\r\n\r\nlet mark2 = null;\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 标注图片\r\n      editing2: true,\r\n      curEditMarkItem2: null,\r\n      isCreateMarking2: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      // 标注图片\r\n      mark2 = new Markjs({\r\n        el: this.$refs.markBox34,\r\n        hoverActive: true,\r\n        img: require(\"../assets/demo.png\"),\r\n        elBg: \"#000\",\r\n        max: 3,\r\n        noCrossing: true,\r\n        mobile: true\r\n      });\r\n      mark2.on(\"CURRENT-MARK-ITEM-CHANGE\", (item) => {\r\n        this.curEditMarkItem2 = item;\r\n      });\r\n      mark2.on(\"IS-CREATE-MARKING-CHANGE\", (state) => {\r\n        this.isCreateMarking2 = state;\r\n      });\r\n      mark2.on(\"LINE-CROSS\", (item) => {\r\n        this.$message.warning(\"线段不允许交叉\");\r\n      });\r\n      mark2.on(\"NOT-ENOUGH-END-POINTS\", (state) => {\r\n        this.$message.warning(\"至少需要绘制三个端点\");\r\n      });\r\n      mark2.on(\"COUNT-LIMIT\", (state) => {\r\n        this.$message.warning(\"最多只能绘制三个区域\");\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    // 标注图片\r\n    getMarkData2() {\r\n      console.log(mark2.getMarkData(), JSON.stringify(mark2.getMarkData()));\r\n    },\r\n    deleteItem2() {\r\n      mark2.deleteMarkItem(this.curEditMarkItem2);\r\n    },\r\n    deleteAll2() {\r\n      mark2.deleteAllMarkItem();\r\n    },\r\n    create2() {\r\n      mark2.createMarkItem();\r\n    },\r\n    exit2() {\r\n      mark2.exitCreate();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 999;\r\n  overflow: hidden;\r\n\r\n  .markBox {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #f5f5f5;\r\n  }\r\n\r\n  .btnGroup {\r\n    position: absolute;\r\n    left: 50%;\r\n    bottom: 0;\r\n    transform: translateX(-50%);\r\n  }\r\n}\r\n</style>","import { render } from \"./Demo3-4.vue?vue&type=template&id=742f3102&scoped=true\"\nimport script from \"./Demo3-4.vue?vue&type=script&lang=js\"\nexport * from \"./Demo3-4.vue?vue&type=script&lang=js\"\n\nimport \"./Demo3-4.vue?vue&type=style&index=0&id=742f3102&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-742f3102\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=3009148a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3009148a&lang=css\"\n\nimport exportComponent from \"E:\\\\works\\\\学习\\\\markjs\\\\markjs-docs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport ElementPlus from 'element-plus'\r\nimport 'element-plus/dist/index.css'\r\n\r\nconst app = createApp(App)\r\napp.use(ElementPlus)\r\napp.mount('#app')\r\n","module.exports = __webpack_public_path__ + \"img/demo6.a31ecc53.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo3-2.vue?vue&type=style&index=0&id=12a2712d&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo5.vue?vue&type=style&index=0&id=4fee0810&lang=less&scoped=true\"","module.exports = __webpack_public_path__ + \"img/demo.79c8fe50.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo4.vue?vue&type=style&index=0&id=5a1e1e2b&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo1.vue?vue&type=style&index=0&id=54060e40&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo3.vue?vue&type=style&index=0&id=6f7eab21&lang=less&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=3009148a&lang=css\"","module.exports = __webpack_public_path__ + \"img/demo3.61b52fff.jpg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo3-3.vue?vue&type=style&index=0&id=b94f777c&lang=less&scoped=true\"","module.exports = __webpack_public_path__ + \"img/demo5.42d7a9fd.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Demo3-4.vue?vue&type=style&index=0&id=742f3102&lang=less&scoped=true\""],"sourceRoot":""}